(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{Widq:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var s=r("tVjc"),o=r("fXoL"),i=r("tk/3");let n=(()=>{class e{constructor(e){this.http=e}getAllUsers(){return this.http.get(s.a+"/Account/GetAllUsers")}editUser(e){return this.http.put(s.a+"/Account/update/user.id",e)}deleteUser(e){return this.http.delete(`${s.a}/Account/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(i.b))},e.\u0275prov=o.Gb({token:e,factory:e.\u0275fac}),e})()},o3Dm:function(e,t,r){"use strict";r.d(t,"a",function(){return L});class s{}var o=r("3Pt+"),i=r("cp0P"),n=r("VTjg"),c=r("fXoL"),a=r("Widq"),l=r("dJ3e"),d=r("XB66"),u=r("tVjc"),b=r("tk/3");let m=(()=>{class e{constructor(e){this.http=e,this.prefix="Account"}addAccount(e){return this.http.post(`${u.a}/${this.prefix}/addAccount`,e)}editAccount(e,t){return this.http.put(`${u.a}${this.prefix}/update-${t}`,e)}}return e.\u0275fac=function(t){return new(t||e)(c.Ub(b.b))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=r("rEr+"),h=r("7zfz"),f=r("/RsI"),w=r("ofXK"),v=r("arFO"),P=r("pfYh");function y(e,t){1&e&&(c.Qb(0,"tr"),c.Qb(1,"th",32),c.Lb(2,"p-tableHeaderCheckbox"),c.Pb(),c.Qb(3,"th",33),c.Dc(4," First Name "),c.Lb(5,"p-sortIcon",34),c.Pb(),c.Qb(6,"th",35),c.Dc(7," Last Name "),c.Lb(8,"p-sortIcon",36),c.Pb(),c.Qb(9,"th",37),c.Dc(10," User Name "),c.Lb(11,"p-sortIcon",38),c.Pb(),c.Qb(12,"th",39),c.Dc(13," Email "),c.Lb(14,"p-sortIcon",40),c.Pb(),c.Qb(15,"th",41),c.Dc(16," Phone Number "),c.Lb(17,"p-sortIcon",42),c.Pb(),c.Qb(18,"th",43),c.Dc(19,"Actions"),c.Pb(),c.Pb())}function g(e,t){if(1&e){const e=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td"),c.Lb(2,"p-tableCheckbox",44),c.Pb(),c.Qb(3,"td"),c.Dc(4),c.Pb(),c.Qb(5,"td"),c.Dc(6),c.Pb(),c.Qb(7,"td"),c.Dc(8),c.Pb(),c.Qb(9,"td"),c.Dc(10),c.Pb(),c.Qb(11,"td"),c.Dc(12),c.Pb(),c.Qb(13,"td"),c.Qb(14,"a",45),c.Xb("click",function(){c.uc(e);const r=t.$implicit;return c.ac().editUser(r)}),c.Lb(15,"span",46),c.Pb(),c.Qb(16,"a",47),c.Xb("click",function(){c.uc(e);const r=t.$implicit;return c.ac().deleteUser(r)}),c.Lb(17,"span",48),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit;c.yb(2),c.hc("value",e),c.yb(2),c.Ec(e.firstName),c.yb(2),c.Ec(e.lastName),c.yb(2),c.Ec(e.userName),c.yb(2),c.Ec(e.email),c.yb(2),c.Ec(e.phoneNumber)}}function A(e,t){if(1&e&&(c.Qb(0,"div",49),c.Dc(1),c.Pb()),2&e){const e=c.ac();c.yb(1),c.Fc(" In total there are ",e.users?e.users.length:0," users. ")}}function N(e,t){}function Q(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",50),c.Lb(1,"input",51),c.Qb(2,"span",52),c.Xb("click",function(){c.uc(e);const t=c.ac();return t.showPassword=!t.showPassword}),c.Lb(3,"i",53),c.Pb(),c.Pb()}if(2&e){const e=c.ac();c.yb(1),c.hc("type",e.showPassword?"text":"password"),c.yb(2),c.hc("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function S(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",50),c.Lb(1,"input",54),c.Qb(2,"span",52),c.Xb("click",function(){c.uc(e);const t=c.ac();return t.showConfirmPassword=!t.showConfirmPassword}),c.Lb(3,"i",53),c.Pb(),c.Pb()}if(2&e){const e=c.ac();c.yb(1),c.hc("type",e.showConfirmPassword?"text":"password"),c.yb(2),c.hc("ngClass",e.showConfirmPassword?"fa-eye-slash":"fa-eye")}}function D(e,t){if(1&e&&(c.Qb(0,"span"),c.Dc(1),c.Pb()),2&e){const e=t.$implicit;c.Ab(e.value),c.yb(1),c.Ec(e.label)}}function C(e,t){1&e&&(c.Qb(0,"button",55),c.Dc(1," Save "),c.Pb())}function U(e,t){if(1&e){const e=c.Rb();c.Qb(0,"button",56),c.Xb("click",function(){return c.uc(e),c.ac().saveEdit()}),c.Dc(1," Edit "),c.Pb()}}const I=function(){return["firstName","lastName","userName","status","email","phoneNumber"]},x=function(){return{width:"450px"}};let L=(()=>{class e{constructor(e,t,r,o,i){this.formBuilder=e,this.usersService=t,this.alertSrvc=r,this.confirmSrvc=o,this.userAccountService=i,this.editMode=!1,this.account=new s}ngOnInit(){this.initAddAccountForm(),this.getAllUsers(),this.roles=[{label:"SuperAdmin",value:n.a.SuperAdmin},{label:"Supervisor",value:n.a.Supervisor},{label:"Secretary",value:n.a.Secretary},{label:"Teacher",value:n.a.Teacher},{label:"Student",value:n.a.Student},{label:"Guest",value:n.a.Guest}]}initAddAccountForm(){this.addAccountForm=this.formBuilder.group({firstName:["",o.r.required],lastName:["",o.r.required],userName:["",[o.r.required,o.r.minLength(6)]],email:["",[o.r.required,o.r.email]],password:["",[o.r.required,o.r.minLength(6)]],confirmPassword:["",[o.r.required,o.r.minLength(6)]],birthDate:"",mobileNumber:"",country:"",role:["",o.r.required]})}onSubmit(){if(this.addAccountForm.invalid)return this.addAccountForm.markAllAsTouched(),this.alertSrvc.newAlert("error","INVALID"===this.addAccountForm.controls.confirmPassword.status?"Passwords didn't match":"Please complete all the required fields");this.userAccountService.addAccount(this.addAccountForm.value).subscribe(e=>{this.alertSrvc.newAlert("Success","Added successfully"),this.addAccountForm.reset(),this.getAllUsers(),this.hideDialog()})}openNew(){this.user={},this.submitted=!1,this.userDialog=!0}editUser(e){this.editMode=!0,this.user=Object.assign({},e),this.userDialog=!0,this.addAccountForm.patchValue({firstName:e.firstName,lastName:e.lastName,userName:e.userName,email:e.email,mobileNumber:e.phoneNumber,role:e.role})}saveEdit(){if(this.addAccountForm.invalid)return this.addAccountForm.markAllAsTouched(),this.alertSrvc.newAlert("error","INVALID"===this.addAccountForm.controls.confirmPassword.status?"Passwords didn't match":"Please complete all the required fields");let e=JSON.parse(JSON.stringify(this.addAccountForm.value));e.id=this.user.id,this.userAccountService.editAccount(e,this.user.id).subscribe(e=>{this.alertSrvc.newAlert("Success","Added successfully"),this.addAccountForm.reset(),this.editMode=!1,this.getAllUsers()}),this.hideDialog()}hideDialog(){this.userDialog=!1,this.submitted=!1,this.editMode=!1}getAllUsers(){this.usersService.getAllUsers().subscribe(e=>{this.users=e.data})}deleteUser(e){this.confirmSrvc.newConfirmation(`Are you sure you want to delete ${e.firstName} ${e.lastName} ?`,()=>{this.usersService.deleteUser(e.id).subscribe(t=>{this.getAllUsers(),this.removeItemFromSelectedItems(e.id),this.alertSrvc.newAlert("success","Successfully Deleted")})},"Confirm")}deleteSelectedUsers(){this.confirmSrvc.newConfirmation("Are you sure you want to delete the selected Users?",()=>{let e=[];this.selectedUsers&&Array.isArray(this.selectedUsers)&&this.selectedUsers.forEach(t=>{e.push(this.usersService.deleteUser(t.id))}),this.selectedUsers=null,Object(i.a)(e).subscribe(e=>{this.alertSrvc.newAlert("success","Successfully Deleted")})},"Confirm")}removeItemFromSelectedItems(e){if(this.selectedUsers&&Array.isArray(this.selectedUsers)){const t=this.selectedUsers.filter(t=>t.id!=e);this.selectedUsers=[...t]}}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(o.c),c.Kb(a.a),c.Kb(l.a),c.Kb(d.a),c.Kb(m))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-users"]],decls:43,vars:22,consts:[[1,"container","pt-5","pb-5"],[1,"d-flex","flex-wrap","justify-content-between","mb-5"],[1,"mr-2","p-button","p-button-icon-only","p-button-rounded","p-button-sm","btn-danger","btn-sm",3,"disabled","click"],[1,"pi","pi-trash"],[1,"btn","adler-btn-sm",3,"click"],[1,"card"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"responsive","value","rows","paginator","globalFilterFields","selection","rowHover","showCurrentPageReport","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","emptymessage"],["header","User Details","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[1,"mb-4"],[3,"formGroup","ngSubmit"],[1,"row","form-group"],[1,"col-lg-6","col-12"],["type","text","pInputText","","id","firstName","name","firstName","formControlName","firstName","autofocus","","placeholder","First name",1,"form-control","adler-form-control"],["type","text","pInputText","","id","lastName","formControlName","lastName","placeholder","Last name",1,"form-control","adler-form-control"],[1,"p-field","p-col"],["type","text","pInputText","","id","userName","formControlName","userName","placeholder","User Name",1,"form-control","adler-form-control"],["type","email","pInputText","","id","email","formControlName","email","placeholder","Email address",1,"form-control","adler-form-control"],["class","p-field p-col position-relative",4,"ngIf"],["type","date","name","birthDate","pInputText","","id","birthDate","formControlName","birthDate","placeholder","Date of birth","bsDatepicker","",1,"form-control","adler-form-control",3,"required"],["type","text","name","mobileNumber","pInputText","","id","mobileNumber","formControlName","mobileNumber","placeholder","Mobile number",1,"form-control","adler-form-control"],["type","text","name","country","pInputText","","id","country","formControlName","country","placeholder","Country",1,"form-control","adler-form-control"],["inputId","role","placeholder","Select role","formControlName","role",3,"options"],["pTemplate","item"],[1,"formbtns","pt-3"],[1,"btn","mr-3","px-5","rounded-pill",3,"click"],["type","submit","class","btn adler-btn px-5 rounded-pill",4,"ngIf"],["type","button","class","btn adler-btn px-5 rounded-pill",3,"click",4,"ngIf"],[2,"width","4rem"],["pSortableColumn","firstName"],["field","firstName"],["pSortableColumn","lastName"],["field","lastName"],["pSortableColumn","userName"],["field","userName"],["pSortableColumn","email"],["field","email"],["pSortableColumn","phoneNumber"],["field","phoneNumber"],[2,"width","10wrem"],[3,"value"],[1,"mr-2","mr-3","text-secondary",3,"click"],[1,"p-button-icon","pi","pi-pencil","font-weight-bold"],[1,"mr-2","mr-3",3,"click"],[1,"p-button-icon","pi","pi-trash","text-danger","font-weight-bold"],[1,"p-d-flex","p-ai-center","p-jc-between"],[1,"p-field","p-col","position-relative"],["pInputText","","name","password","id","password","formControlName","password","placeholder","Password",1,"form-control","adler-form-control",3,"type"],[1,"show-password","position-absolute",3,"click"],[1,"fas",3,"ngClass"],["pInputText","","appConfirmEqualValidator","password","name","confirmPassword","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control","adler-form-control",3,"type"],["type","submit",1,"btn","adler-btn","px-5","rounded-pill"],["type","button",1,"btn","adler-btn","px-5","rounded-pill",3,"click"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div"),c.Qb(3,"button",2),c.Xb("click",function(){return t.deleteSelectedUsers()}),c.Lb(4,"i",3),c.Pb(),c.Qb(5,"button",4),c.Xb("click",function(){return t.openNew()}),c.Dc(6,"Add New User"),c.Pb(),c.Pb(),c.Pb(),c.Qb(7,"div",5),c.Qb(8,"p-table",6,7),c.Xb("selectionChange",function(e){return t.selectedUsers=e}),c.Bc(10,y,20,0,"ng-template",8),c.Bc(11,g,18,6,"ng-template",9),c.Bc(12,A,2,1,"ng-template",10),c.Bc(13,N,0,0,"ng-template",11),c.Pb(),c.Pb(),c.Pb(),c.Qb(14,"p-dialog",12),c.Xb("visibleChange",function(e){return t.userDialog=e})("onHide",function(){return t.hideDialog()}),c.Qb(15,"h5",13),c.Dc(16,"Please Fill the following form"),c.Pb(),c.Qb(17,"form",14),c.Xb("ngSubmit",function(){return t.onSubmit()}),c.Qb(18,"div",15),c.Qb(19,"div",16),c.Lb(20,"input",17),c.Pb(),c.Qb(21,"div",16),c.Lb(22,"input",18),c.Pb(),c.Pb(),c.Qb(23,"div",19),c.Lb(24,"input",20),c.Pb(),c.Qb(25,"div",19),c.Lb(26,"input",21),c.Pb(),c.Bc(27,Q,4,2,"div",22),c.Bc(28,S,4,2,"div",22),c.Qb(29,"div",19),c.Lb(30,"input",23),c.Pb(),c.Qb(31,"div",19),c.Lb(32,"input",24),c.Pb(),c.Qb(33,"div",19),c.Lb(34,"input",25),c.Pb(),c.Qb(35,"div",19),c.Qb(36,"p-dropdown",26),c.Bc(37,D,2,3,"ng-template",27),c.Pb(),c.Pb(),c.Qb(38,"div",28),c.Qb(39,"button",29),c.Xb("click",function(){return t.hideDialog()}),c.Dc(40," Cancel "),c.Pb(),c.Bc(41,C,2,0,"button",30),c.Bc(42,U,2,0,"button",31),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.yb(3),c.hc("disabled",!t.selectedUsers||!t.selectedUsers.length),c.yb(5),c.hc("responsive",!0)("value",t.users)("rows",10)("paginator",!0)("globalFilterFields",c.jc(20,I))("selection",t.selectedUsers)("rowHover",!0)("showCurrentPageReport",!0),c.yb(6),c.zc(c.jc(21,x)),c.hc("visible",t.userDialog)("modal",!0),c.yb(3),c.hc("formGroup",t.addAccountForm),c.yb(10),c.hc("ngIf",!t.editMode),c.yb(1),c.hc("ngIf",!t.editMode),c.yb(2),c.hc("required",!0),c.yb(6),c.hc("options",t.roles),c.yb(5),c.hc("ngIf",!t.editMode),c.yb(1),c.hc("ngIf",t.editMode))},directives:[p.c,h.i,f.a,o.s,o.k,o.e,o.b,o.j,o.d,w.l,o.q,v.a,p.e,p.b,p.a,p.d,w.j,P.a],styles:[""]}),e})()},tVjc:function(e,t,r){"use strict";r.d(t,"a",function(){return s});const s="http://mazenebada-001-site2.itempurl.com/api/"}}]);