(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{Kj3r:function(e,t,s){"use strict";s.d(t,"a",function(){return i});var n=s("7o/Q"),a=s("D0XW");function i(e,t=a.a){return s=>s.lift(new o(e,t))}class o{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new c(e,this.dueTime,this.scheduler))}}class c extends n.a{constructor(e,t,s){super(e),this.dueTime=t,this.scheduler=s,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(r,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function r(e){e.debouncedNext()}},qqLe:function(e,t,s){"use strict";s.r(t),s.d(t,"FeedBackSheetModule",function(){return O});var n=s("ofXK"),a=s("tyNb"),i=s("Kj3r"),o=s("O9he"),c=s("7o2P"),r=s("WR8Z");class l{}var b=s("fXoL"),u=s("tk/3"),d=s("tVjc");let p=(()=>{class e{constructor(e){this.http=e,this.prefix="Feedback",this.feedBackBaseUrl=`${d.a}/${this.prefix}`}createFeedBackSheetTemplate(e){return this.http.post(""+this.feedBackBaseUrl,e)}editFeedBackSheetTemplate(e){return this.http.put(""+this.feedBackBaseUrl,e)}archiveFeedBackSheetTemplate(e){const t=Object.assign(new u.f,{id:String(e)});return this.http.put(this.feedBackBaseUrl+"/Archive",{},{params:t})}checkFeedBackCreation(){return this.http.get(this.feedBackBaseUrl+"/CheckFeedbackSheetCreation")}getFeedBackSheetTemplate(){return this.http.get(""+this.feedBackBaseUrl)}getAllFeedbackSubmissions(e,t,s){const n=Object.assign({PageNumber:e,PageSize:t},s);return this.http.get(this.feedBackBaseUrl+"/GetAll",{params:n})}getFeedbackSheetForStudentByGroupInstanceId(e,t){const s=Object.assign(new u.f,{studentId:e,groupInstanceId:t});return this.http.get(this.feedBackBaseUrl+"/GetFeedbackSheetInstancesForStudentByGroupInstanceId",{params:s})}getFeedbackSheetForStudent(e){const t=Object.assign(new u.f,{studentId:e});return this.http.get(this.feedBackBaseUrl+"/GetFeedbackSheetInstancesForStudent",{params:t})}}return e.\u0275fac=function(t){return new(t||e)(b.Ub(u.b))},e.\u0275prov=b.Gb({token:e,factory:e.\u0275fac}),e})();var h=s("dJ3e"),g=s("3Pt+"),f=s("arFO"),m=s("rEr+"),S=s("7zfz"),P=s("6t4m");function k(e,t){1&e&&(b.Qb(0,"button",27),b.Hc(1,"View Template"),b.Pb())}function v(e,t){1&e&&(b.Qb(0,"tr"),b.Qb(1,"th",28),b.Hc(2," Student Name "),b.Lb(3,"p-sortIcon",29),b.Pb(),b.Qb(4,"th",30),b.Hc(5," Group Serial "),b.Lb(6,"p-sortIcon",31),b.Pb(),b.Qb(7,"th",32),b.Hc(8," Lesson Serial "),b.Lb(9,"p-sortIcon",33),b.Pb(),b.Qb(10,"th",34),b.Hc(11," Due Date"),b.Lb(12,"p-sortIcon",35),b.Pb(),b.Qb(13,"th",36),b.Hc(14," Submission Date"),b.Lb(15,"p-sortIcon",37),b.Pb(),b.Qb(16,"th",38),b.Hc(17," Status"),b.Lb(18,"p-sortIcon",39),b.Pb(),b.Qb(19,"th",40),b.Hc(20," Actions "),b.Lb(21,"p-sortIcon",41),b.Pb(),b.Pb())}function w(e,t){1&e&&(b.Ob(0),b.Hc(1,"Closed"),b.Nb())}function I(e,t){1&e&&(b.Ob(0),b.Hc(1,"Pending"),b.Nb())}function C(e,t){1&e&&(b.Ob(0),b.Hc(1,"Solved"),b.Nb())}function y(e,t){1&e&&(b.Ob(0),b.Hc(1,"Missed"),b.Nb())}function F(e,t){1&e&&(b.Ob(0),b.Hc(1,"Corrected"),b.Nb())}const Q=function(e,t,s,n,a){return{closed:e,pending:t,solved:s,missed:n,corrected:a}};function x(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"td"),b.Hc(2),b.Pb(),b.Qb(3,"td"),b.Hc(4),b.Pb(),b.Qb(5,"td"),b.Hc(6),b.Pb(),b.Qb(7,"td"),b.Hc(8),b.cc(9,"date"),b.Pb(),b.Qb(10,"td"),b.Hc(11),b.cc(12,"date"),b.Pb(),b.Qb(13,"td"),b.Qb(14,"span",42),b.Ob(15,43),b.Fc(16,w,2,0,"ng-container",44),b.Fc(17,I,2,0,"ng-container",44),b.Fc(18,C,2,0,"ng-container",44),b.Fc(19,y,2,0,"ng-container",44),b.Fc(20,F,2,0,"ng-container",44),b.Nb(),b.Pb(),b.Pb(),b.Qb(21,"td"),b.Hc(22,"-"),b.Pb(),b.Pb()),2&e){const e=t.$implicit;b.yb(2),b.Jc("",(null==e?null:e.studentName)||"-"," "),b.yb(2),b.Jc("",(null==e?null:e.groupSerial)||"-"," "),b.yb(2),b.Jc("",(null==e?null:e.lessonSerial)||"-"," "),b.yb(2),b.Jc("",b.ec(9,12,null==e?null:e.dueDate,"longDate")||"-"," "),b.yb(3),b.Jc("",b.ec(12,15,null==e?null:e.submissionDate,"longDate")||"-"," "),b.yb(3),b.ic("ngClass",b.qc(18,Q,0==e.status,1==e.status,2==e.status,3==e.status,4==e.status)),b.yb(1),b.ic("ngSwitch",e.status),b.yb(1),b.ic("ngSwitchCase",0),b.yb(1),b.ic("ngSwitchCase",1),b.yb(1),b.ic("ngSwitchCase",2),b.yb(1),b.ic("ngSwitchCase",3),b.yb(1),b.ic("ngSwitchCase",4)}}function B(e,t){1&e&&(b.Qb(0,"tr"),b.Qb(1,"td",45),b.Hc(2," No records found "),b.Pb(),b.Pb())}const L=[{path:"submissions",component:(()=>{class e{constructor(e,t,s,n,a,i){this.dynamicDialogService=e,this.feedBackService=t,this.alertService=s,this.commonService=n,this.teacherService=a,this.fb=i,this.rowsPerPageOptions=[10,25,50,100],this.pageNo=1,this.pageSize=this.rowsPerPageOptions[0],this.feedbackSubmissionsList=[],this.groupInstances=[],this.lessonInstances=[],this.statusList=[]}ngOnInit(){this.getAllFeedbackSubmissions(),this.checkFeedBackTemplateExistance(),this.initFilters(),this.onFilterChange(),this.onGroupInstanceChange(),this.getAllGroupInstances(),this.getAllStatusList()}paginate(e){this.pageNo=e.page+1,this.pageSize=e.rows,this.getAllFeedbackSubmissions()}initFilters(){this.filtersForm=this.fb.group({GroupInstanceId:[],StudentName:[],Status:[],LessonInstanceId:[]})}onFilterChange(){this.filtersForm.valueChanges.pipe(Object(i.a)(1e3)).subscribe(e=>{const t=Object.assign(new l,e);Object.keys(t).forEach(e=>{const s=t[e];null!=s&&""!==s||delete t[e]}),this.getAllFeedbackSubmissions(t)})}onGroupInstanceChange(){this.filtersForm.get("GroupInstanceId").valueChanges.subscribe(e=>{if(!e)return this.lessonInstances=[];this.getAllLessonInstancesByGroupInstanceId(e)})}getAllFeedbackSubmissions(e){this.feedBackService.getAllFeedbackSubmissions(this.pageNo,this.pageSize,e).subscribe(e=>{this.feedbackSubmissionsList=e.data,this.count=e.count})}checkFeedBackTemplateExistance(){this.feedBackService.checkFeedBackCreation().subscribe(e=>{this.feedbackTemplateExist=!e})}openCreatePromoCodeModal(){this.feedbackTemplateExist&&this.alertService.newAlert("info","There is a feedback sheet template already exist, archive it first if you want to create a new one")}getAllGroupInstances(){this.commonService.getAllGroupInstances().subscribe(e=>{var t;0===e.data.length&&this.filtersForm.get("LessonInstanceId").disable(),this.groupInstances=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.map(e=>({label:e.serial,value:e.id}))})}getAllLessonInstancesByGroupInstanceId(e){this.teacherService.getAllLessonInstancesByGroupInstance(e).subscribe(e=>{var t;this.lessonInstances=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.map(e=>({label:e.serial,value:e.id}))})}getAllStatusList(){this.statusList=[{label:"Closed",value:"0"},{label:"Pending",value:"1"},{label:"Solved",value:"2"},{label:"Missed",value:"3"},{label:"Corrected",value:"4"}]}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(o.a),b.Kb(p),b.Kb(h.a),b.Kb(c.a),b.Kb(r.a),b.Kb(g.e))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-feedback-submissions-list"]],features:[b.xb([o.a,c.a,r.a])],decls:40,vars:23,consts:[[1,"container"],[1,"page-title"],[1,"text-primary","font-weight-bold"],[1,"mb-4","text-right"],["type","button","class","btn btn-outline-secondary mr-4 ",4,"ngIf"],["type","button",1,"btn","adler-btn",3,"click"],[1,"ml-4"],[1,"fas","fa-plus"],[3,"formGroup"],[1,"d-flex","align-items-baseline","justify-content-between"],[1,"d-flex","dropdownsFilters"],[1,"d-flex","flex-column","mr-3"],[1,"text-secondary"],["formControlName","GroupInstanceId","placeholder","Select group instance",3,"filter","showClear","options"],["formControlName","LessonInstanceId",3,"filter","showClear","options","placeholder"],["formControlName","Status","placeholder","Select a Status",3,"filter","showClear","options"],[1,"d-flex","flex-column","search"],[1,"pi","pi-search",2,"margin","4px 4px 0 0"],[1,"p-input-icon-left"],["autocomplete","off","pInputText","","pInputText","","size","50","type","text","formControlName","StudentName","placeholder","Enter Name",1,"form-control","adler-form-control",2,"background-color","#fff","margin","0"],[1,"card"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"responsive","value","rows","paginator","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"rows","first","rowsPerPageOptions","totalRecords","onPageChange"],["type","button",1,"btn","btn-outline-secondary","mr-4"],["pSortableColumn","studentName"],["field","studentName"],["pSortableColumn","groupSerial"],["field","groupSerial"],["pSortableColumn","lessonSerial"],["field","lessonSerial"],["pSortableColumn","dueDate"],["field","dueDate"],["pSortableColumn","submissionDate"],["field","submissionDate"],["pSortableColumn","status"],["field","status"],["pSortableColumn","actions",2,"width","6rem"],["field","actions"],[1,"status-box",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],["colspan","3",1,"text-center","pt-4","pb-4","mt-4"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"h1",2),b.Hc(3,"FeedBack Sheet"),b.Pb(),b.Pb(),b.Qb(4,"div",3),b.Fc(5,k,2,0,"button",4),b.Qb(6,"button",5),b.Xb("click",function(){return t.openCreatePromoCodeModal()}),b.Hc(7,"Create Template"),b.Qb(8,"span",6),b.Lb(9,"i",7),b.Pb(),b.Pb(),b.Pb(),b.Qb(10,"form",8),b.Qb(11,"div",9),b.Qb(12,"div",10),b.Qb(13,"div",11),b.Qb(14,"label",12),b.Hc(15,"Group instance"),b.Pb(),b.Lb(16,"p-dropdown",13),b.Pb(),b.Pb(),b.Qb(17,"div",10),b.Qb(18,"div",11),b.Qb(19,"label",12),b.Hc(20,"Lesson instance"),b.Pb(),b.Lb(21,"p-dropdown",14),b.Pb(),b.Pb(),b.Qb(22,"div",10),b.Qb(23,"div",11),b.Qb(24,"label",12),b.Hc(25,"Status"),b.Pb(),b.Lb(26,"p-dropdown",15),b.Pb(),b.Pb(),b.Qb(27,"div",16),b.Qb(28,"label",12),b.Lb(29,"i",17),b.Hc(30,"Student name"),b.Pb(),b.Qb(31,"span",18),b.Lb(32,"input",19),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(33,"div",20),b.Qb(34,"p-table",21,22),b.Fc(36,v,22,0,"ng-template",23),b.Fc(37,x,23,24,"ng-template",24),b.Fc(38,B,3,0,"ng-template",25),b.Pb(),b.Qb(39,"p-paginator",26),b.Xb("onPageChange",function(e){return t.paginate(e)}),b.Pb(),b.Pb(),b.Pb()),2&e&&(b.yb(5),b.ic("ngIf",t.feedbackTemplateExist),b.yb(5),b.ic("formGroup",t.filtersForm),b.yb(6),b.ic("filter",!0)("showClear",!0)("options",t.groupInstances),b.yb(5),b.ic("filter",!0)("showClear",!0)("options",t.lessonInstances)("placeholder",0===t.groupInstances.length?"Select a group instance First":"Select Lesson Instance"),b.yb(5),b.ic("filter",!0)("showClear",!0)("options",t.statusList),b.yb(8),b.ic("responsive",!0)("value",t.feedbackSubmissionsList)("rows",10)("paginator",!0)("rowHover",!0)("paginator",!1)("showCurrentPageReport",!0),b.yb(5),b.ic("rows",t.pageSize)("first",1)("rowsPerPageOptions",t.rowsPerPageOptions)("totalRecords",t.count))},directives:[n.m,g.y,g.q,g.i,f.a,g.p,g.g,g.b,m.d,S.i,P.a,m.c,m.b,n.k,n.o,n.p],pipes:[n.f],styles:[".status-box[_ngcontent-%COMP%]{font-size:10px;font-weight:700;padding:5px 10px;border-radius:5px;color:#fff;width:75px;text-align:center;display:inline-block}.closed[_ngcontent-%COMP%]{background-color:#34495e}.pending[_ngcontent-%COMP%]{background-color:#e67e22}.solved[_ngcontent-%COMP%]{background-color:#3498db}.corrected[_ngcontent-%COMP%]{background-color:#27ae60}.missed[_ngcontent-%COMP%]{background-color:#c0392b}"]}),e})()}];let H=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[a.g.forChild(L)],a.g]}),e})();var N=s("PCNd");let O=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},providers:[p],imports:[[n.c,H,N.a]]}),e})()}}]);