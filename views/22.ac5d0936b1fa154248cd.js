(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"2JQ1":function(e,t,o){"use strict";o.r(t),o.d(t,"PromocodeModule",function(){return E});var i=o("ofXK"),r=o("tyNb"),n=o("XNiG");class s{constructor(){this.applyFiltersSubj=new n.a,this.applyFilters$=this.applyFiltersSubj.asObservable()}get promoCodeId(){return this._promoCodeId}set promoCodeId(e){this._promoCodeId=e,this.applyFilters()}get promoCodeName(){return this._promoCodeName}set promoCodeName(e){this._promoCodeName=e,this.applyFilters()}get studentName(){return this._studentName}set studentName(e){this._studentName=e,this.applyFilters()}get isValid(){return this._isValid}set isValid(e){this._isValid=e,this.applyFilters()}applyFilters(e=!0){this.applyFiltersSubj.next(e)}get filtersData(){return{promoCodeId:this._promoCodeId,promoCodeName:this._promoCodeName,studentName:this._studentName,isValid:this._isValid}}}var a=o("Kj3r"),l=o("fXoL"),c=o("tVjc"),d=o("tk/3");let p=(()=>{class e{constructor(e){this.http=e,this.prefix="PromoCode"}getAllPromoCodes(e,t,o){let i=`PageNumber=${e}&PageSize=${t}`;const r=(e,t)=>{i+=`&${e}=${t}`};if(o)for(const n in o)if(Object.prototype.hasOwnProperty.call(o,n)){const e=o[n];e&&r(n,e)}return this.http.get(`${c.a}/${this.prefix}/GetAllPromoCode?${i}`)}getAllPromoCodesInstances(e,t,o){let i=`PageNumber=${e}&PageSize=${t}`;const r=(e,t)=>{i+=`&${e}=${t}`};if(o)for(const n in o)if(Object.prototype.hasOwnProperty.call(o,n)){const e=o[n];null!=e&&r(n,e)}return this.http.get(`${c.a}/${this.prefix}/GetAllPromocodeInstances?${i}`)}checkPromoCode(e){return this.http.get(`${c.a}/${this.prefix}/CheckPromoCode?name=${e}`)}createPromoCode(e){return this.http.post(`${c.a}/${this.prefix}/CreatePromoCode`,e)}generatePromoCodeInstance(e){return this.http.post(`${c.a}/${this.prefix}/CreatePromoCodeInstance`,e)}getPromoCodeInstanceByPromoCodeKey(e){return this.http.get(`${c.a}/${this.prefix}/GetPromoCodeInstance?PromoCodeKey=${e}`)}}return e.\u0275fac=function(t){return new(t||e)(l.Ub(d.b))},e.\u0275prov=l.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var b=o("dJ3e"),m=o("XB66"),u=o("arFO"),h=o("3Pt+"),g=o("LuMj"),f=o("rEr+"),P=o("7zfz"),C=o("6t4m");function y(e,t){if(1&e){const e=l.Rb();l.Qb(0,"a",27),l.Xb("click",function(){return l.xc(e),l.bc().filter.isValid=void 0}),l.Qb(1,"small"),l.Gc(2,"Reset"),l.Pb(),l.Pb()}}function w(e,t){1&e&&(l.Qb(0,"tr"),l.Qb(1,"th",28),l.Gc(2," Type "),l.Lb(3,"p-sortIcon",29),l.Pb(),l.Qb(4,"th",30),l.Gc(5," Code "),l.Lb(6,"p-sortIcon",31),l.Pb(),l.Qb(7,"th",32),l.Gc(8," Start Date "),l.Lb(9,"p-sortIcon",33),l.Pb(),l.Qb(10,"th",34),l.Gc(11," End Date "),l.Lb(12,"p-sortIcon",35),l.Pb(),l.Qb(13,"th",36),l.Gc(14," Student "),l.Lb(15,"p-sortIcon",37),l.Pb(),l.Qb(16,"th",38),l.Gc(17," is Valid "),l.Lb(18,"p-sortIcon",39),l.Pb(),l.Qb(19,"th",40),l.Gc(20," Is Used "),l.Lb(21,"p-sortIcon",41),l.Pb(),l.Qb(22,"th",42),l.Gc(23," Actions "),l.Lb(24,"p-sortIcon",43),l.Pb(),l.Pb())}function Q(e,t){1&e&&l.Lb(0,"i",51)}function v(e,t){1&e&&l.Lb(0,"i",52)}function I(e,t){1&e&&(l.Qb(0,"i"),l.Gc(1,"-"),l.Pb())}function S(e,t){1&e&&l.Lb(0,"i",51)}function N(e,t){1&e&&l.Lb(0,"i",52)}function x(e,t){1&e&&(l.Qb(0,"i"),l.Gc(1,"-"),l.Pb())}function G(e,t){if(1&e){const e=l.Rb();l.Qb(0,"tr"),l.Qb(1,"td"),l.Gc(2),l.Pb(),l.Qb(3,"td",44),l.Xb("click",function(){l.xc(e);const o=t.$implicit;return l.bc().copyToClipboard(o.promoCodeKey)}),l.Gc(4),l.Pb(),l.Qb(5,"td"),l.Gc(6),l.cc(7,"date"),l.Pb(),l.Qb(8,"td"),l.Gc(9),l.cc(10,"date"),l.Pb(),l.Qb(11,"td"),l.Gc(12),l.Pb(),l.Qb(13,"td"),l.Qb(14,"span",45),l.Ec(15,Q,1,0,"i",46),l.Ec(16,v,1,0,"i",47),l.Ec(17,I,2,0,"i",48),l.Pb(),l.Pb(),l.Qb(18,"td"),l.Qb(19,"span",45),l.Ec(20,S,1,0,"i",46),l.Ec(21,N,1,0,"i",47),l.Ec(22,x,2,0,"i",48),l.Pb(),l.Pb(),l.Qb(23,"td"),l.Qb(24,"div"),l.Qb(25,"a",49),l.Xb("click",function(){l.xc(e);const o=t.$implicit;return l.bc().copyToClipboard(o.promoCodeKey)}),l.Lb(26,"span",50),l.Pb(),l.Pb(),l.Pb(),l.Pb()}if(2&e){const e=t.$implicit;l.yb(2),l.Ic("",(null==e?null:e.promoCodeName)+" %"||!1," "),l.yb(2),l.Hc((null==e?null:e.promoCodeKey)||"-"),l.yb(2),l.Hc(l.ec(7,11,null==e?null:e.startDate,"short")||"-"),l.yb(3),l.Hc(l.ec(10,14,null==e?null:e.endDate,"short")||"-"),l.yb(3),l.Hc((null==e?null:e.studentName)||"-"),l.yb(2),l.ic("ngSwitch",e.isValid),l.yb(1),l.ic("ngSwitchCase",!0),l.yb(1),l.ic("ngSwitchCase",!1),l.yb(3),l.ic("ngSwitch",e.isUsed),l.yb(1),l.ic("ngSwitchCase",!0),l.yb(1),l.ic("ngSwitchCase",!1)}}function $(e,t){1&e&&(l.Qb(0,"tr"),l.Qb(1,"td",53),l.Gc(2,"No records found"),l.Pb(),l.Pb())}const L=function(){return{width:"200px"}},k=function(){return["/promocode/create"]};let M=(()=>{class e{constructor(e,t,o,i){this.promocodeApiService=e,this.router=t,this.alertService=o,this.confirmService=i,this.rowsPerPageOptions=[10,25,50,100],this.pageNo=1,this.pageSize=this.rowsPerPageOptions[0],this.filter=new s,this.promoCodeInstancesList=[],this.promoCodeList=[]}ngOnInit(){this.getAllPromoCodes(),this.getAllPromoCodesInstances(),this.applyFiltersOnFiltersChange()}paginate(e){this.pageNo=e.page,this.pageNo||(this.pageNo=1),this.pageSize=e.rows,this.getAllPromoCodesInstances()}applyFiltersOnFiltersChange(){this.filter.applyFilters$.pipe(Object(a.a)(1500)).subscribe(e=>{e&&this.getAllPromoCodesInstances()})}getAllPromoCodes(){this.promocodeApiService.getAllPromoCodes(1,999).subscribe(e=>{this.promoCodeList=e.data.map(e=>({label:e.name,value:e.name}),[]),this.promoCodeList.unshift({label:"All",value:null})})}getAllPromoCodesInstances(){this.promocodeApiService.getAllPromoCodesInstances(this.pageNo,this.pageSize,this.filter.filtersData).subscribe(e=>{this.promoCodeInstancesList=e.data,this.count=e.count})}copyToClipboard(e){navigator.clipboard.writeText(e).then(e=>{this.alertService.newAlert("success","copied to clipboard")})}}return e.\u0275fac=function(t){return new(t||e)(l.Kb(p),l.Kb(r.c),l.Kb(b.a),l.Kb(m.a))},e.\u0275cmp=l.Eb({type:e,selectors:[["app-promocode-list"]],decls:37,vars:25,consts:[[1,"container"],[1,"page-title"],[1,"text-primary","font-weight-bold"],[1,"d-flex","mb-4","mt-3","align-items-end","justify-content-between"],[1,"d-flex"],[1,"mr-5","ml-3"],["for","Type",1,"mr-3","d-block"],["id","Type","name","Type",3,"options","ngModel","ngModelChange"],[1,"mr-5"],["for","status",1,"mr-3","d-block"],["type","text","name","code",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","studentName",1,"form-control",3,"ngModel","ngModelChange"],[1,"d-flex","flex-row"],["name","isValid","label","Yes",3,"value","ngModel","ngModelChange"],["styleClass","ml-3","name","isValid","label","No",3,"value","ngModel","ngModelChange"],["class","text-black-50 text-underline",3,"click",4,"ngIf"],[1,"text-right"],["type","submit",1,"btn","adler-btn",3,"routerLink"],[1,"ml-4"],[1,"fas","fa-plus"],[1,"card"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"responsive","value","rows","paginator","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"rows","first","rowsPerPageOptions","totalRecords","onPageChange"],[1,"text-black-50","text-underline",3,"click"],["pSortableColumn","promoCodeName",2,"width","8rem"],["field","promoCodeName"],["pSortableColumn","promoCodeKey",2,"width","15rem"],["field","promoCodeKey"],["pSortableColumn","startDate",2,"width","10rem"],["field","bugName"],["pSortableColumn","endDate",2,"width","10rem"],["field","description"],["pSortableColumn","studentName",2,"width","15rem"],["field","note"],["pSortableColumn","isValid",2,"width","10rem"],["field","isValid"],["pSortableColumn","isUsed",2,"width","10rem"],["field","isUsed"],["pSortableColumn","image",2,"width","7rem"],["field","image"],[3,"click"],[3,"ngSwitch"],["class","pi pi-check text-success",4,"ngSwitchCase"],["class","pi pi-times text-danger",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["title","Copy to clipboard",1,"mr-2","mr-3","text-secondary",3,"click"],[1,"p-button-icon","pi","pi-copy","font-weight-bold"],[1,"pi","pi-check","text-success"],[1,"pi","pi-times","text-danger"],["colspan","8",1,"text-center","pt-4","pb-4"]],template:function(e,t){1&e&&(l.Qb(0,"div",0),l.Qb(1,"div",1),l.Qb(2,"h1",2),l.Gc(3,"Promo Codes Report - List"),l.Pb(),l.Pb(),l.Qb(4,"div",3),l.Qb(5,"div",4),l.Qb(6,"div",5),l.Qb(7,"label",6),l.Gc(8," All Types "),l.Pb(),l.Qb(9,"p-dropdown",7),l.Xb("ngModelChange",function(e){return t.filter.promoCodeName=e}),l.Pb(),l.Pb(),l.Qb(10,"div",8),l.Qb(11,"label",9),l.Gc(12," PromoCodeId "),l.Pb(),l.Qb(13,"input",10),l.Xb("ngModelChange",function(e){return t.filter.promoCodeId=e}),l.Pb(),l.Pb(),l.Qb(14,"div",8),l.Qb(15,"label",9),l.Gc(16," Student Name "),l.Pb(),l.Qb(17,"input",11),l.Xb("ngModelChange",function(e){return t.filter.studentName=e}),l.Pb(),l.Pb(),l.Qb(18,"div",8),l.Qb(19,"label",9),l.Gc(20," is Valid "),l.Pb(),l.Qb(21,"div",12),l.Qb(22,"p-radioButton",13),l.Xb("ngModelChange",function(e){return t.filter.isValid=e}),l.Pb(),l.Qb(23,"p-radioButton",14),l.Xb("ngModelChange",function(e){return t.filter.isValid=e}),l.Pb(),l.Pb(),l.Ec(24,y,3,0,"a",15),l.Pb(),l.Pb(),l.Qb(25,"div",16),l.Qb(26,"button",17),l.Gc(27,"Create"),l.Qb(28,"span",18),l.Lb(29,"i",19),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Qb(30,"div",20),l.Qb(31,"p-table",21,22),l.Ec(33,w,25,0,"ng-template",23),l.Ec(34,G,27,17,"ng-template",24),l.Ec(35,$,3,0,"ng-template",25),l.Pb(),l.Qb(36,"p-paginator",26),l.Xb("onPageChange",function(e){return t.paginate(e)}),l.Pb(),l.Pb(),l.Pb()),2&e&&(l.yb(9),l.Cc(l.lc(23,L)),l.ic("options",t.promoCodeList)("ngModel",t.filter.promoCodeName),l.yb(4),l.ic("ngModel",t.filter.promoCodeId),l.yb(4),l.ic("ngModel",t.filter.studentName),l.yb(5),l.ic("value",!0)("ngModel",t.filter.isValid),l.yb(1),l.ic("value",!1)("ngModel",t.filter.isValid),l.yb(1),l.ic("ngIf",null!=t.filter.isValid),l.yb(2),l.ic("routerLink",l.lc(24,k)),l.yb(5),l.ic("responsive",!0)("value",t.promoCodeInstancesList)("rows",10)("paginator",!0)("rowHover",!0)("paginator",!1)("showCurrentPageReport",!0),l.yb(5),l.ic("rows",t.pageSize)("first",1)("rowsPerPageOptions",t.rowsPerPageOptions)("totalRecords",t.count))},directives:[u.a,h.l,h.o,h.b,g.a,i.l,r.d,f.d,P.i,C.a,f.c,f.b,i.n,i.o,i.p],pipes:[i.e],styles:[""]}),e})(),V=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Eb({type:e,selectors:[["app-create-or-edit-promocode"]],decls:2,vars:0,template:function(e,t){1&e&&(l.Qb(0,"p"),l.Gc(1,"create-or-edit-promocode works!"),l.Pb())},styles:[""]}),e})();const A=[{path:"",component:M},{path:"create",component:V},{path:"edit/:id",component:V}];let O=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},imports:[[r.g.forChild(A)],r.g]}),e})();var F=o("PCNd");let E=(()=>{class e{}return e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({factory:function(t){return new(t||e)},providers:[p],imports:[[i.c,O,F.a]]}),e})()}}]);