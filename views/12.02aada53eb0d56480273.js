(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"u+F6":function(e,t,r){"use strict";r.r(t),r.d(t,"UsersModule",function(){return X});var o=r("ofXK"),i=r("tyNb");class s{}var n=r("3Pt+"),c=r("fXoL"),a=r("tVjc"),l=r("tk/3");let b=(()=>{class e{constructor(e){this.http=e}getAllUsers(){return this.http.get(a.a+"/Account/GetAllUsers")}editUser(e){return this.http.put(a.a+"/Account/update/user.id",e)}deleteUser(e){return this.http.delete(`${a.a}/Account${e}`)}}return e.\u0275fac=function(t){return new(t||e)(c.Ub(l.b))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac}),e})();var u=r("dJ3e");let d=(()=>{class e{constructor(e){this.http=e,this.prefix="Account"}addAccount(e){return this.http.post(`${a.a}/${this.prefix}/addAccount`,e)}editAccount(e,t){return this.http.put(`${a.a}${this.prefix}/update-${t}`,e)}}return e.\u0275fac=function(t){return new(t||e)(c.Ub(l.b))},e.\u0275prov=c.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=r("Gxio"),m=r("5EWq"),f=r("7zfz"),h=r("rEr+"),g=r("/RsI"),P=r("arFO"),v=r("jIHw"),y=r("pfYh");function w(e,t){if(1&e){const e=c.Rb();c.Qb(0,"button",32),c.Xb("click",function(){return c.tc(e),c.ac().openNew()}),c.Pb(),c.Qb(1,"button",33),c.Xb("click",function(){return c.tc(e),c.ac().deleteSelectedUsers()}),c.Lb(2,"i",34),c.Pb()}if(2&e){const e=c.ac();c.yb(1),c.gc("disabled",!e.selectedUsers||!e.selectedUsers.length)}}function A(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",35),c.Qb(1,"h5",36),c.Cc(2,"All users"),c.Pb(),c.Qb(3,"span",37),c.Lb(4,"i",38),c.Qb(5,"input",39),c.Xb("input",function(t){return c.tc(e),c.ac(),c.sc(6).filterGlobal(t.target.value,"contains")}),c.Pb(),c.Pb(),c.Pb()}}function N(e,t){1&e&&(c.Qb(0,"tr"),c.Qb(1,"th"),c.Lb(2,"p-tableHeaderCheckbox"),c.Pb(),c.Qb(3,"th",40),c.Cc(4," firstName "),c.Lb(5,"p-sortIcon",41),c.Pb(),c.Qb(6,"th",42),c.Cc(7," lastName "),c.Lb(8,"p-sortIcon",43),c.Pb(),c.Qb(9,"th",44),c.Cc(10," userName "),c.Lb(11,"p-sortIcon",45),c.Pb(),c.Qb(12,"th",46),c.Cc(13," email "),c.Lb(14,"p-sortIcon",47),c.Pb(),c.Qb(15,"th",48),c.Cc(16," phoneNumber "),c.Lb(17,"p-sortIcon",49),c.Pb(),c.Qb(18,"th"),c.Cc(19,"Action"),c.Pb(),c.Pb())}function C(e,t){if(1&e){const e=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td"),c.Lb(2,"p-tableCheckbox",50),c.Pb(),c.Qb(3,"td"),c.Cc(4),c.Pb(),c.Qb(5,"td"),c.Cc(6),c.Pb(),c.Qb(7,"td"),c.Cc(8),c.Pb(),c.Qb(9,"td"),c.Cc(10),c.Pb(),c.Qb(11,"td"),c.Cc(12),c.Pb(),c.Qb(13,"td"),c.Qb(14,"button",51),c.Xb("click",function(){c.tc(e);const r=t.$implicit;return c.ac().editUser(r)}),c.Pb(),c.Lb(15,"button",52),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit;c.yb(2),c.gc("value",e),c.yb(2),c.Dc(e.firstName),c.yb(2),c.Dc(e.lastName),c.yb(2),c.Dc(e.userName),c.yb(2),c.Dc(e.email),c.yb(2),c.Dc(e.phoneNumber)}}function Q(e,t){if(1&e&&(c.Qb(0,"div",35),c.Cc(1),c.Pb()),2&e){const e=c.ac();c.yb(1),c.Ec(" In total there are ",e.users?e.users.length:0," users. ")}}function S(e,t){}function I(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",53),c.Lb(1,"input",54),c.Qb(2,"span",55),c.Xb("click",function(){c.tc(e);const t=c.ac();return t.showPassword=!t.showPassword}),c.Lb(3,"i",56),c.Pb(),c.Pb()}if(2&e){const e=c.ac();c.yb(1),c.gc("type",e.showPassword?"text":"password"),c.yb(2),c.gc("ngClass",e.showPassword?"fa-eye-slash":"fa-eye")}}function L(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",53),c.Lb(1,"input",57),c.Qb(2,"span",55),c.Xb("click",function(){c.tc(e);const t=c.ac();return t.showConfirmPassword=!t.showConfirmPassword}),c.Lb(3,"i",56),c.Pb(),c.Pb()}if(2&e){const e=c.ac();c.yb(1),c.gc("type",e.showConfirmPassword?"text":"password"),c.yb(2),c.gc("ngClass",e.showConfirmPassword?"fa-eye-slash":"fa-eye")}}function k(e,t){if(1&e&&(c.Qb(0,"span"),c.Cc(1),c.Pb()),2&e){const e=t.$implicit;c.Ab(e.value),c.yb(1),c.Dc(e.label)}}function x(e,t){1&e&&(c.Qb(0,"button",58),c.Lb(1,"i",59),c.Cc(2,"save "),c.Pb())}function q(e,t){if(1&e){const e=c.Rb();c.Qb(0,"button",60),c.Xb("click",function(){return c.tc(e),c.ac().saveEdit()}),c.Lb(1,"i",59),c.Cc(2,"Edit "),c.Pb()}}const D=function(){return["firstName","lastName","userName","status","email","phoneNumber"]},F=function(){return{width:"450px"}},T=[{path:"",component:(()=>{class e{constructor(e,t,r,o){this.formBuilder=e,this.usersService=t,this.alertSrvc=r,this.userAccountService=o,this.editMode=!1,this.account=new s}ngOnInit(){this.initAddAccountForm(),this.getAllUsers(),this.roles=[{label:"SuperAdmin",value:"SuperAdmin"},{label:"Supervisor",value:"Supervisor"},{label:"Secretary",value:"Secretary"},{label:"Teacher",value:"Teacher"},{label:"Student",value:"Student"},{label:"Guest",value:"Guest"}]}initAddAccountForm(){this.addAccountForm=this.formBuilder.group({firstName:["",n.q.required],lastName:["",n.q.required],userName:["",[n.q.required,n.q.minLength(6)]],email:["",[n.q.required,n.q.email]],password:["",[n.q.required,n.q.minLength(6)]],confirmPassword:["",[n.q.required,n.q.minLength(6)]],birthDate:"",mobileNumber:"",country:"",role:["",n.q.required]})}onSubmit(){if(console.log("form value :",this.addAccountForm.value),this.addAccountForm.invalid)return this.addAccountForm.markAllAsTouched(),this.alertSrvc.newAlert("error","INVALID"===this.addAccountForm.controls.confirmPassword.status?"Passwords didn't match":"Please complete all the required fields");this.userAccountService.addAccount(this.addAccountForm.value).subscribe(e=>{this.alertSrvc.newAlert("Success","Added successfully"),this.addAccountForm.reset()})}openNew(){this.user={},this.submitted=!1,this.userDialog=!0}editUser(e){this.editMode=!0,this.user=Object.assign({},e),this.userDialog=!0,this.addAccountForm.patchValue({firstName:e.firstName,lastName:e.lastName,userName:e.userName,email:e.email,mobileNumber:e.phoneNumber,role:e.role}),console.log("editMode",this.editMode)}saveEdit(){if(this.addAccountForm.invalid)return this.addAccountForm.markAllAsTouched(),this.alertSrvc.newAlert("error","INVALID"===this.addAccountForm.controls.confirmPassword.status?"Passwords didn't match":"Please complete all the required fields");let e=JSON.parse(JSON.stringify(this.addAccountForm.value));e.id=this.user.id,this.userAccountService.editAccount(e,this.user.id).subscribe(e=>{this.alertSrvc.newAlert("Success","Added successfully"),this.addAccountForm.reset(),this.editMode=!1}),this.hideDialog()}hideDialog(){this.userDialog=!1,this.submitted=!1,this.editMode=!1}deleteSelectedUsers(){}getAllUsers(){this.usersService.getAllUsers().subscribe(e=>{this.users=e.data,console.log("get all users ",this.users)})}}return e.\u0275fac=function(t){return new(t||e)(c.Kb(n.c),c.Kb(b),c.Kb(u.a),c.Kb(d))},e.\u0275cmp=c.Eb({type:e,selectors:[["app-users"]],decls:42,vars:21,consts:[[1,"container"],[1,"card"],["styleClass","p-mb-4"],["pTemplate","left"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"responsive","value","rows","paginator","globalFilterFields","selection","rowHover","showCurrentPageReport","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["pTemplate","emptymessage"],["header","User Details","styleClass","p-fluid",3,"visible","modal","visibleChange","onHide"],[1,"mb-4"],[3,"formGroup","ngSubmit"],[1,"row","form-group"],[1,"col-lg-6","col-12"],["type","text","pInputText","","id","firstName","name","firstName","formControlName","firstName","autofocus","","placeholder","First name",1,"form-control","adler-form-control"],["type","text","pInputText","","id","lastName","formControlName","lastName","placeholder","Last name",1,"form-control","adler-form-control"],[1,"p-field","p-col"],["type","text","pInputText","","id","userName","formControlName","userName","placeholder","User Name",1,"form-control","adler-form-control"],["type","email","pInputText","","id","email","formControlName","email","placeholder","Email address",1,"form-control","adler-form-control"],["class","p-field p-col position-relative",4,"ngIf"],["type","date","name","birthDate","pInputText","","id","birthDate","formControlName","birthDate","placeholder","Date of birth","bsDatepicker","",1,"form-control","adler-form-control",3,"required"],["type","text","name","mobileNumber","pInputText","","id","mobileNumber","formControlName","mobileNumber","placeholder","Mobile number",1,"form-control","adler-form-control"],["type","text","name","country","pInputText","","id","country","formControlName","country","placeholder","Country",1,"form-control","adler-form-control"],["inputId","role","placeholder","Select role","formControlName","role",3,"options"],["pTemplate","item"],[1,"formbtns","pt-3"],[1,"btn","mr-3",3,"click"],[1,"pi","pi-times"],["type","submit","class","btn btn-primary adler-btn",4,"ngIf"],["type","button","class","btn btn-primary adler-btn",3,"click",4,"ngIf"],["pButton","","pRipple","","label","New","icon","pi pi-plus",1,"p-button-success","p-mr-2",3,"click"],[1,"btn","btn-danger","ml-3",3,"disabled","click"],[1,"pi","pi-trash"],[1,"p-d-flex","p-ai-center","p-jc-between"],[1,"p-m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pSortableColumn","firstName"],["field","firstName"],["pSortableColumn","lastName"],["field","lastName"],["pSortableColumn","userName"],["field","userName"],["pSortableColumn","email"],["field","email"],["pSortableColumn","phoneNumber"],["field","phoneNumber"],[3,"value"],["pButton","","pRipple","","icon","pi pi-pencil",1,"p-button-rounded","p-button-success","p-mr-2",3,"click"],["pButton","","pRipple","","icon","pi pi-trash",1,"p-button-rounded","p-button-warning"],[1,"p-field","p-col","position-relative"],["pInputText","","name","password","id","password","formControlName","password","placeholder","Password",1,"form-control","adler-form-control",3,"type"],[1,"show-password","position-absolute",3,"click"],[1,"fas",3,"ngClass"],["pInputText","","appConfirmEqualValidator","password","name","confirmPassword","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm password",1,"form-control","adler-form-control",3,"type"],["type","submit",1,"btn","btn-primary","adler-btn"],[1,"pi","pi-check"],["type","button",1,"btn","btn-primary","adler-btn",3,"click"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Lb(1,"p-toast"),c.Qb(2,"div",1),c.Qb(3,"p-toolbar",2),c.Ac(4,w,3,1,"ng-template",3),c.Pb(),c.Qb(5,"p-table",4,5),c.Xb("selectionChange",function(e){return t.selectedUsers=e}),c.Ac(7,A,6,0,"ng-template",6),c.Ac(8,N,20,0,"ng-template",7),c.Ac(9,C,16,6,"ng-template",8),c.Ac(10,Q,2,1,"ng-template",9),c.Ac(11,S,0,0,"ng-template",10),c.Pb(),c.Pb(),c.Pb(),c.Qb(12,"p-dialog",11),c.Xb("visibleChange",function(e){return t.userDialog=e})("onHide",function(){return t.hideDialog()}),c.Qb(13,"h5",12),c.Cc(14,"Please Fill the following form"),c.Pb(),c.Qb(15,"form",13),c.Xb("ngSubmit",function(){return t.onSubmit()}),c.Qb(16,"div",14),c.Qb(17,"div",15),c.Lb(18,"input",16),c.Pb(),c.Qb(19,"div",15),c.Lb(20,"input",17),c.Pb(),c.Pb(),c.Qb(21,"div",18),c.Lb(22,"input",19),c.Pb(),c.Qb(23,"div",18),c.Lb(24,"input",20),c.Pb(),c.Ac(25,I,4,2,"div",21),c.Ac(26,L,4,2,"div",21),c.Qb(27,"div",18),c.Lb(28,"input",22),c.Pb(),c.Qb(29,"div",18),c.Lb(30,"input",23),c.Pb(),c.Qb(31,"div",18),c.Lb(32,"input",24),c.Pb(),c.Qb(33,"div",18),c.Qb(34,"p-dropdown",25),c.Ac(35,k,2,3,"ng-template",26),c.Pb(),c.Pb(),c.Qb(36,"div",27),c.Qb(37,"button",28),c.Xb("click",function(){return t.hideDialog()}),c.Lb(38,"i",29),c.Cc(39," Cancel "),c.Pb(),c.Ac(40,x,3,0,"button",30),c.Ac(41,q,3,0,"button",31),c.Pb(),c.Pb(),c.Pb()),2&e&&(c.yb(5),c.gc("responsive",!0)("value",t.users)("rows",10)("paginator",!0)("globalFilterFields",c.ic(19,D))("selection",t.selectedUsers)("rowHover",!0)("showCurrentPageReport",!0),c.yb(7),c.yc(c.ic(20,F)),c.gc("visible",t.userDialog)("modal",!0),c.yb(3),c.gc("formGroup",t.addAccountForm),c.yb(10),c.gc("ngIf",!t.editMode),c.yb(1),c.gc("ngIf",!t.editMode),c.yb(2),c.gc("required",!0),c.yb(6),c.gc("options",t.roles),c.yb(6),c.gc("ngIf",!t.editMode),c.yb(1),c.gc("ngIf",t.editMode))},directives:[p.a,m.a,f.h,h.c,g.a,n.r,n.k,n.e,n.b,n.j,n.d,o.l,n.p,P.a,v.b,h.e,h.b,h.a,h.d,o.j,y.a],styles:[""]}),e})()}];let U=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},imports:[[i.e.forChild(T)],i.e]}),e})();var R=r("PCNd");let X=(()=>{class e{}return e.\u0275mod=c.Ib({type:e}),e.\u0275inj=c.Hb({factory:function(t){return new(t||e)},providers:[b],imports:[[o.c,U,R.a]]}),e})()}}]);