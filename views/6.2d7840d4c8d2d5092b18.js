(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{qqLe:function(e,t,i){"use strict";i.r(t),i.d(t,"FeedBackSheetModule",function(){return Pe});var n=i("ofXK"),s=i("tyNb"),o=i("mrSG"),a=i("Kj3r"),c=i("O9he"),r=i("7o2P"),l=i("WR8Z");class d{}var b=i("fXoL"),u=i("tk/3"),p=i("tVjc");let h=(()=>{class e{constructor(e){this.http=e,this.prefix="Feedback",this.feedBackBaseUrl=`${p.a}/${this.prefix}`}createFeedBackSheetTemplate(e){return this.http.post(""+this.feedBackBaseUrl,e)}editFeedBackSheetTemplate(e){return this.http.put(""+this.feedBackBaseUrl,e)}archiveFeedBackSheetTemplate(e){const t={id:String(e)};return this.http.put(this.feedBackBaseUrl+"/Archive",{},{params:t})}checkFeedBackCreation(){return this.http.get(this.feedBackBaseUrl+"/CheckFeedbackSheetCreation")}getFeedBackSheetTemplate(){return this.http.get(""+this.feedBackBaseUrl)}getAllFeedbackSubmissions(e,t,i){const n=Object.assign({PageNumber:e,PageSize:t},i);return this.http.get(this.feedBackBaseUrl+"/GetAll",{params:n})}getFeedbackSheetForStudentByGroupInstanceId(e,t){const i=Object.assign(new u.f,{studentId:e,groupInstanceId:t});return this.http.get(this.feedBackBaseUrl+"/GetFeedbackSheetInstancesForStudentByGroupInstanceId",{params:i})}getFeedbackSheetForStudent(e){const t=Object.assign(new u.f,{studentId:e});return this.http.get(this.feedBackBaseUrl+"/GetFeedbackSheetInstancesForStudent",{params:t})}}return e.\u0275fac=function(t){return new(t||e)(b.Ub(u.b))},e.\u0275prov=b.Gb({token:e,factory:e.\u0275fac}),e})();var g=i("dJ3e"),f=i("3Pt+"),m=i("arFO"),P=i("rEr+"),Q=i("7zfz"),v=i("6t4m"),y=i("/RsI");function w(e,t){if(1&e){const e=b.Rb();b.Qb(0,"button",29),b.Xb("click",function(){return b.yc(e),b.bc().showActiveTemplate()}),b.Hc(1,"View Template"),b.Pb()}}function k(e,t){if(1&e){const e=b.Rb();b.Qb(0,"button",29),b.Xb("click",function(){return b.yc(e),b.bc().archiveTemplate()}),b.Hc(1,"Archive Template"),b.Pb()}}function C(e,t){1&e&&(b.Qb(0,"tr"),b.Qb(1,"th",30),b.Hc(2," Student Name "),b.Lb(3,"p-sortIcon",31),b.Pb(),b.Qb(4,"th",32),b.Hc(5," Group Serial "),b.Lb(6,"p-sortIcon",33),b.Pb(),b.Qb(7,"th",34),b.Hc(8," Lesson Serial "),b.Lb(9,"p-sortIcon",35),b.Pb(),b.Qb(10,"th",36),b.Hc(11," Due Date"),b.Lb(12,"p-sortIcon",37),b.Pb(),b.Qb(13,"th",38),b.Hc(14," Submission Date"),b.Lb(15,"p-sortIcon",39),b.Pb(),b.Qb(16,"th",40),b.Hc(17," Status"),b.Lb(18,"p-sortIcon",41),b.Pb(),b.Qb(19,"th",42),b.Hc(20," Actions "),b.Lb(21,"p-sortIcon",43),b.Pb(),b.Pb())}function F(e,t){1&e&&(b.Ob(0),b.Hc(1,"Closed"),b.Nb())}function S(e,t){1&e&&(b.Ob(0),b.Hc(1,"Pending"),b.Nb())}function x(e,t){1&e&&(b.Ob(0),b.Hc(1,"Solved"),b.Nb())}function T(e,t){1&e&&(b.Ob(0),b.Hc(1,"Missed"),b.Nb())}function O(e,t){1&e&&(b.Ob(0),b.Hc(1,"Corrected"),b.Nb())}const I=function(e,t,i,n,s){return{closed:e,pending:t,solved:i,missed:n,corrected:s}};function M(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"td"),b.Hc(2),b.Pb(),b.Qb(3,"td"),b.Hc(4),b.Pb(),b.Qb(5,"td"),b.Hc(6),b.Pb(),b.Qb(7,"td"),b.Hc(8),b.cc(9,"date"),b.Pb(),b.Qb(10,"td"),b.Hc(11),b.cc(12,"date"),b.Pb(),b.Qb(13,"td"),b.Qb(14,"span",44),b.Ob(15,45),b.Fc(16,F,2,0,"ng-container",46),b.Fc(17,S,2,0,"ng-container",46),b.Fc(18,x,2,0,"ng-container",46),b.Fc(19,T,2,0,"ng-container",46),b.Fc(20,O,2,0,"ng-container",46),b.Nb(),b.Pb(),b.Pb(),b.Qb(21,"td"),b.Hc(22,"-"),b.Pb(),b.Pb()),2&e){const e=t.$implicit;b.yb(2),b.Jc("",(null==e?null:e.studentName)||"-"," "),b.yb(2),b.Jc("",(null==e?null:e.groupSerial)||"-"," "),b.yb(2),b.Jc("",(null==e?null:e.lessonSerial)||"-"," "),b.yb(2),b.Jc("",b.ec(9,12,null==e?null:e.dueDate,"longDate")||"-"," "),b.yb(3),b.Jc("",b.ec(12,15,null==e?null:e.submissionDate,"longDate")||"-"," "),b.yb(3),b.ic("ngClass",b.qc(18,I,0==e.status,1==e.status,2==e.status,3==e.status,4==e.status)),b.yb(1),b.ic("ngSwitch",e.status),b.yb(1),b.ic("ngSwitchCase",0),b.yb(1),b.ic("ngSwitchCase",1),b.yb(1),b.ic("ngSwitchCase",2),b.yb(1),b.ic("ngSwitchCase",3),b.yb(1),b.ic("ngSwitchCase",4)}}function H(e,t){1&e&&(b.Qb(0,"tr"),b.Qb(1,"td",47),b.Hc(2," No records found "),b.Pb(),b.Pb())}function L(e,t){if(1&e&&(b.Qb(0,"div"),b.Qb(1,"p",12),b.Hc(2,"FeedBack Title"),b.Pb(),b.Qb(3,"p",49),b.Hc(4),b.Pb(),b.Pb()),2&e){const e=b.bc(2);b.yb(4),b.Jc(" ",null==e.feedbackTemplate||null==e.feedbackTemplate.questions[0]?null:e.feedbackTemplate.questions[0].header," ")}}function A(e,t){1&e&&b.Lb(0,"i",58)}function _(e,t){1&e&&b.Lb(0,"i",59)}function q(e,t){if(1&e&&(b.Qb(0,"li"),b.Fc(1,A,1,0,"i",56),b.Fc(2,_,1,0,"i",57),b.Qb(3,"span"),b.Hc(4),b.Pb(),b.Pb()),2&e){const e=t.$implicit;b.yb(1),b.ic("ngIf",e.isCorrect&&"false"!=e.name),b.yb(1),b.ic("ngIf",!e.isCorrect||"false"==e.name),b.yb(2),b.Ic(e.name)}}function B(e,t){if(1&e&&(b.Qb(0,"ul"),b.Qb(1,"li"),b.Hc(2),b.Pb(),b.Pb()),2&e){const e=b.bc().$implicit;b.yb(2),b.Ic(e.answerIsTrueOrFalse)}}function N(e,t){if(1&e&&(b.Qb(0,"div",52),b.Qb(1,"p",53),b.Hc(2),b.Qb(3,"span",54),b.Hc(4),b.Pb(),b.Pb(),b.Qb(5,"ul"),b.Fc(6,q,5,3,"li",55),b.Pb(),b.Fc(7,B,3,1,"ul",28),b.Pb()),2&e){const e=t.$implicit,i=t.index;b.yb(2),b.Kc("",i+1," - ",e.text," "),b.yb(2),b.Jc(" Points: ",e.points,""),b.yb(2),b.ic("ngForOf",e.choices),b.yb(1),b.ic("ngIf",1==e.singleQuestionType)}}function R(e,t){if(1&e&&(b.Qb(0,"div"),b.Qb(1,"p",12),b.Hc(2,"Questions"),b.Pb(),b.Qb(3,"div",50),b.Fc(4,N,8,5,"div",51),b.Pb(),b.Qb(5,"h6"),b.Hc(6),b.cc(7,"date"),b.Pb(),b.Pb()),2&e){const e=b.bc(2);b.yb(4),b.ic("ngForOf",null==e.feedbackTemplate||null==e.feedbackTemplate.questions[0]?null:e.feedbackTemplate.questions[0].singleQuestions),b.yb(2),b.Jc(" Creation Date ",b.ec(7,2,e.feedbackTemplate.createdDate,"medium")," ")}}function G(e,t){if(1&e&&(b.Ob(0),b.Qb(1,"h5",48),b.Hc(2),b.Pb(),b.Fc(3,L,5,1,"div",28),b.Fc(4,R,8,5,"div",28),b.Nb()),2&e){const e=b.bc();b.yb(2),b.Kc(" ",e.feedbackTemplate.name," - duration ",e.feedbackTemplate.duration," "),b.yb(1),b.ic("ngIf",null==e.feedbackTemplate||null==e.feedbackTemplate.questions[0]?null:e.feedbackTemplate.questions[0].header),b.yb(1),b.ic("ngIf",(null==e.feedbackTemplate||null==e.feedbackTemplate.questions[0]?null:e.feedbackTemplate.questions[0].singleQuestions)&&(null==e.feedbackTemplate||null==e.feedbackTemplate.questions[0]?null:e.feedbackTemplate.questions[0].singleQuestions.length)>0)}}const X=function(){return{width:"50vw"}};let D=(()=>{class e{constructor(e,t,i,n,s,o){this.router=e,this.feedBackService=t,this.alertService=i,this.commonService=n,this.teacherService=s,this.fb=o,this.rowsPerPageOptions=[10,25,50,100],this.pageNo=1,this.pageSize=this.rowsPerPageOptions[0],this.feedbackSubmissionsList=[],this.groupInstances=[],this.lessonInstances=[],this.statusList=[],this.showViewDialog=!1}ngOnInit(){this.getAllFeedbackSubmissions(),this.checkFeedBackTemplateExistance(),this.initFilters(),this.onFilterChange(),this.onGroupInstanceChange(),this.getAllGroupInstances(),this.getAllStatusList()}paginate(e){this.pageNo=e.page+1,this.pageSize=e.rows,this.getAllFeedbackSubmissions()}initFilters(){this.filtersForm=this.fb.group({GroupInstanceId:[],StudentName:[],Status:[],LessonInstanceId:[]})}onFilterChange(){this.filtersForm.valueChanges.pipe(Object(a.a)(1e3)).subscribe(e=>{const t=Object.assign(new d,e);Object.keys(t).forEach(e=>{const i=t[e];null!=i&&""!==i||delete t[e]}),this.getAllFeedbackSubmissions(t)})}onGroupInstanceChange(){this.filtersForm.get("GroupInstanceId").valueChanges.subscribe(e=>{if(!e)return this.lessonInstances=[];this.getAllLessonInstancesByGroupInstanceId(e)})}getAllFeedbackSubmissions(e){this.feedBackService.getAllFeedbackSubmissions(this.pageNo,this.pageSize,e).subscribe(e=>{this.feedbackSubmissionsList=e.data,this.count=e.count})}checkFeedBackTemplateExistance(){this.feedBackService.checkFeedBackCreation().subscribe(e=>{this.feedbackTemplateExist=!e})}openCreatePromoCodeModal(){if(this.feedbackTemplateExist)return this.alertService.newAlert("info","There is a feedback sheet template already exist, archive it first if you want to create a new one");this.router.navigate(["supervisor/feedback-sheet/template/create"])}getAllGroupInstances(){this.commonService.getAllGroupInstances().subscribe(e=>{var t;0===e.data.length&&this.filtersForm.get("LessonInstanceId").disable(),this.groupInstances=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.map(e=>({label:e.serial,value:e.id}))})}getAllLessonInstancesByGroupInstanceId(e){this.teacherService.getAllLessonInstancesByGroupInstance(e).subscribe(e=>{var t;this.lessonInstances=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.map(e=>({label:e.serial,value:e.id}))})}getAllStatusList(){this.statusList=[{label:"Closed",value:"0"},{label:"Pending",value:"1"},{label:"Solved",value:"2"},{label:"Missed",value:"3"},{label:"Corrected",value:"4"}]}archiveTemplate(){return Object(o.a)(this,void 0,void 0,function*(){const e=yield this.getActiveTemplate().toPromise();this.feedBackService.archiveFeedBackSheetTemplate(e.id).subscribe(e=>{this.alertService.newAlert("success","Feedback active template archived successfully"),this.checkFeedBackTemplateExistance()})})}getActiveTemplate(){return this.feedBackService.getFeedBackSheetTemplate()}showActiveTemplate(){return Object(o.a)(this,void 0,void 0,function*(){this.feedbackTemplate=yield this.getActiveTemplate().toPromise(),this.showViewDialog=!0})}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(s.c),b.Kb(h),b.Kb(g.a),b.Kb(r.a),b.Kb(l.a),b.Kb(f.e))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-feedback-submissions-list"]],features:[b.xb([c.a,r.a,l.a])],decls:43,vars:29,consts:[[1,"container"],[1,"page-title"],[1,"text-primary","font-weight-bold"],[1,"mb-4","text-right"],["type","button","class","btn btn-outline-secondary mr-4",3,"click",4,"ngIf"],["type","button",1,"btn","adler-btn",3,"click"],[1,"ml-4"],[1,"fas","fa-plus"],[3,"formGroup"],[1,"d-flex","align-items-baseline","justify-content-between"],[1,"d-flex","dropdownsFilters"],[1,"d-flex","flex-column","mr-3"],[1,"text-secondary"],["formControlName","GroupInstanceId","placeholder","Select group instance",3,"filter","showClear","options"],["formControlName","LessonInstanceId",3,"filter","showClear","options","placeholder"],["formControlName","Status","placeholder","Select a Status",3,"filter","showClear","options"],[1,"d-flex","flex-column","search"],[1,"pi","pi-search",2,"margin","4px 4px 0 0"],[1,"p-input-icon-left"],["autocomplete","off","pInputText","","pInputText","","size","50","type","text","formControlName","StudentName","placeholder","Enter Name",1,"form-control","adler-form-control",2,"background-color","#fff","margin","0"],[1,"card"],["dataKey","id","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"responsive","value","rows","paginator","rowHover","showCurrentPageReport"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"rows","first","rowsPerPageOptions","totalRecords","onPageChange"],["header","Active Feedback Details",3,"visible","visibleChange"],[4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","mr-4",3,"click"],["pSortableColumn","studentName"],["field","studentName"],["pSortableColumn","groupSerial"],["field","groupSerial"],["pSortableColumn","lessonSerial"],["field","lessonSerial"],["pSortableColumn","dueDate"],["field","dueDate"],["pSortableColumn","submissionDate"],["field","submissionDate"],["pSortableColumn","status"],["field","status"],["pSortableColumn","actions",2,"width","6rem"],["field","actions"],[1,"status-box",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],["colspan","3",1,"text-center","pt-4","pb-4","mt-4"],[1,"mb-4"],[1,"text-secondary","font-weight-bold","question-text"],[1,"pl-5"],["class","single-question",4,"ngFor","ngForOf"],[1,"single-question"],[1,"text-secondary","question-text"],[1,"points"],[4,"ngFor","ngForOf"],["class","pi pi-check text-success font-weight-bold",4,"ngIf"],["class","pi pi-times text-danger font-weight-bold",4,"ngIf"],[1,"pi","pi-check","text-success","font-weight-bold"],[1,"pi","pi-times","text-danger","font-weight-bold"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"h1",2),b.Hc(3,"FeedBack Sheet"),b.Pb(),b.Pb(),b.Qb(4,"div",3),b.Fc(5,w,2,0,"button",4),b.Fc(6,k,2,0,"button",4),b.Qb(7,"button",5),b.Xb("click",function(){return t.openCreatePromoCodeModal()}),b.Hc(8,"Create Template"),b.Qb(9,"span",6),b.Lb(10,"i",7),b.Pb(),b.Pb(),b.Pb(),b.Qb(11,"form",8),b.Qb(12,"div",9),b.Qb(13,"div",10),b.Qb(14,"div",11),b.Qb(15,"label",12),b.Hc(16,"Group instance"),b.Pb(),b.Lb(17,"p-dropdown",13),b.Pb(),b.Pb(),b.Qb(18,"div",10),b.Qb(19,"div",11),b.Qb(20,"label",12),b.Hc(21,"Lesson instance"),b.Pb(),b.Lb(22,"p-dropdown",14),b.Pb(),b.Pb(),b.Qb(23,"div",10),b.Qb(24,"div",11),b.Qb(25,"label",12),b.Hc(26,"Status"),b.Pb(),b.Lb(27,"p-dropdown",15),b.Pb(),b.Pb(),b.Qb(28,"div",16),b.Qb(29,"label",12),b.Lb(30,"i",17),b.Hc(31,"Student name"),b.Pb(),b.Qb(32,"span",18),b.Lb(33,"input",19),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(34,"div",20),b.Qb(35,"p-table",21,22),b.Fc(37,C,22,0,"ng-template",23),b.Fc(38,M,23,24,"ng-template",24),b.Fc(39,H,3,0,"ng-template",25),b.Pb(),b.Qb(40,"p-paginator",26),b.Xb("onPageChange",function(e){return t.paginate(e)}),b.Pb(),b.Pb(),b.Pb(),b.Qb(41,"p-dialog",27),b.Xb("visibleChange",function(e){return t.showViewDialog=e}),b.Fc(42,G,5,4,"ng-container",28),b.Pb()),2&e&&(b.yb(5),b.ic("ngIf",t.feedbackTemplateExist),b.yb(1),b.ic("ngIf",t.feedbackTemplateExist),b.yb(5),b.ic("formGroup",t.filtersForm),b.yb(6),b.ic("filter",!0)("showClear",!0)("options",t.groupInstances),b.yb(5),b.ic("filter",!0)("showClear",!0)("options",t.lessonInstances)("placeholder",0===t.groupInstances.length?"Select a group instance First":"Select Lesson Instance"),b.yb(5),b.ic("filter",!0)("showClear",!0)("options",t.statusList),b.yb(8),b.ic("responsive",!0)("value",t.feedbackSubmissionsList)("rows",10)("paginator",!0)("rowHover",!0)("paginator",!1)("showCurrentPageReport",!0),b.yb(5),b.ic("rows",t.pageSize)("first",1)("rowsPerPageOptions",t.rowsPerPageOptions)("totalRecords",t.count),b.yb(1),b.Dc(b.lc(28,X)),b.ic("visible",t.showViewDialog),b.yb(1),b.ic("ngIf",t.showViewDialog))},directives:[n.m,f.y,f.q,f.i,m.a,f.p,f.g,f.b,P.d,Q.i,v.a,y.a,P.c,P.b,n.k,n.o,n.p,n.l],pipes:[n.f],styles:[".status-box[_ngcontent-%COMP%]{font-size:10px;font-weight:700;padding:5px 10px;border-radius:5px;color:#fff;width:75px;text-align:center;display:inline-block}.closed[_ngcontent-%COMP%]{background-color:#34495e}.pending[_ngcontent-%COMP%]{background-color:#e67e22}.solved[_ngcontent-%COMP%]{background-color:#3498db}.corrected[_ngcontent-%COMP%]{background-color:#27ae60}.missed[_ngcontent-%COMP%]{background-color:#c0392b}.question-text[_ngcontent-%COMP%]{background-color:#d0d4e5;padding:1rem;border-radius:5px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:.3rem 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;margin-right:.5rem}"]}),e})();var z=i("Qd2v"),K=i("mTcB");class E{constructor(){this.testTypeId=4,this.duration=15,this.questions=[]}}var j=i("LuMj");function J(e,t){1&e&&b.Lb(0,"div")}function U(e,t){1&e&&b.Lb(0,"i",29)}function $(e,t){1&e&&b.Lb(0,"i",30)}function V(e,t){if(1&e&&(b.Qb(0,"li"),b.Fc(1,U,1,0,"i",27),b.Fc(2,$,1,0,"i",28),b.Qb(3,"span"),b.Hc(4),b.Pb(),b.Pb()),2&e){const e=t.$implicit;b.yb(1),b.ic("ngIf",e.isCorrect&&"false"!=e.name),b.yb(1),b.ic("ngIf",!e.isCorrect||"false"==e.name),b.yb(2),b.Ic(e.name)}}function W(e,t){1&e&&b.Lb(0,"i",29)}function Z(e,t){1&e&&b.Lb(0,"i",30)}function Y(e,t){if(1&e&&(b.Qb(0,"li"),b.Fc(1,W,1,0,"i",27),b.Fc(2,Z,1,0,"i",28),b.Qb(3,"span"),b.Hc(4),b.Pb(),b.Pb()),2&e){const e=b.bc().$implicit;b.yb(1),b.ic("ngIf",e.answerIsTrueOrFalse),b.yb(1),b.ic("ngIf",!e.answerIsTrueOrFalse),b.yb(2),b.Jc(" ",e.answerIsTrueOrFalse," ")}}function ee(e,t){if(1&e){const e=b.Rb();b.Qb(0,"div",22),b.Qb(1,"i",23),b.Xb("click",function(){b.yc(e);const i=t.index;return b.bc(2).removeRelativeQuestion(i)}),b.Pb(),b.Qb(2,"span",24),b.Hc(3),b.Pb(),b.Qb(4,"p",25),b.Hc(5),b.Pb(),b.Qb(6,"ul"),b.Fc(7,V,5,3,"li",26),b.Fc(8,Y,5,3,"li",13),b.Pb(),b.Pb()}if(2&e){const e=t.$implicit,i=t.index;b.yb(3),b.Jc("points: ",e.points,""),b.yb(2),b.Kc(" ",i+1," - ",e.text," "),b.yb(2),b.ic("ngForOf",e.choices),b.yb(1),b.ic("ngIf",1==e.singleQuestionType)}}function te(e,t){if(1&e&&(b.Qb(0,"div"),b.Qb(1,"p",20),b.Hc(2,"Related Questions"),b.Pb(),b.Fc(3,ee,9,5,"div",21),b.Pb()),2&e){const e=b.bc();b.yb(3),b.ic("ngForOf",e.relatedSingleQuestionsArray)}}function ie(e,t){if(1&e){const e=b.Rb();b.Qb(0,"p",31),b.Qb(1,"span",32),b.Xb("click",function(){return b.yc(e),b.bc().addRelatedQuestion()}),b.Qb(2,"span",33),b.Lb(3,"i",34),b.Pb(),b.Hc(4," Add Question "),b.Pb(),b.Pb()}}function ne(e,t){if(1&e){const e=b.Rb();b.Qb(0,"i",55),b.Xb("click",function(){b.yc(e);const t=b.bc().index;return b.bc(3).remove(t)}),b.Pb()}}function se(e,t){if(1&e){const e=b.Rb();b.Qb(0,"div",50),b.Qb(1,"p-radioButton",51),b.Xb("onClick",function(){b.yc(e);const i=t.$implicit;return b.bc(3).selectSingleRightAnswer(i)}),b.Pb(),b.Qb(2,"label",52),b.Hc(3),b.Pb(),b.Qb(4,"input",53),b.Xb("blur",function(){return b.yc(e),b.bc(3).toggleLabelEditingMode()}),b.Pb(),b.Fc(5,ne,1,0,"i",54),b.Pb()}if(2&e){const e=t.$implicit,i=t.index,n=b.bc(3);b.yb(1),b.kc("inputId","answer-",i,""),b.ic("disabled",n.editMode[i])("value",e),b.yb(1),b.Cb("hidden",n.editMode[i]),b.kc("for","answer-",i,""),b.yb(1),b.Ic(e.name),b.yb(1),b.ic("type",n.editMode[i]?"text":"hidden"),b.yb(1),b.ic("ngIf",!n.editMode[i])}}function oe(e,t){if(1&e){const e=b.Rb();b.Qb(0,"div",47),b.Fc(1,se,6,9,"div",48),b.Qb(2,"p",49),b.Xb("click",function(){return b.yc(e),b.bc(2).addAnswer()}),b.Lb(3,"i",34),b.Hc(4," Add another answer"),b.Pb(),b.Pb()}if(2&e){const e=b.bc(2);b.yb(1),b.ic("ngForOf",e.answers)}}function ae(e,t){if(1&e){const e=b.Rb();b.Qb(0,"i",55),b.Xb("click",function(){b.yc(e);const t=b.bc().index;return b.bc(3).remove(t)}),b.Pb()}}function ce(e,t){if(1&e){const e=b.Rb();b.Qb(0,"div",50),b.Qb(1,"input",56,57),b.Xb("change",function(){b.yc(e);const i=t.$implicit,n=b.vc(2);return b.bc(3).selectMultipleRightAnswers(i,n.checked)}),b.Pb(),b.Qb(3,"label",52),b.Hc(4),b.Pb(),b.Qb(5,"input",53),b.Xb("blur",function(){return b.yc(e),b.bc(3).toggleLabelEditingMode()}),b.Pb(),b.Fc(6,ae,1,0,"i",54),b.Pb()}if(2&e){const e=t.$implicit,i=t.index,n=b.bc(3);b.yb(1),b.kc("id","answer-",i,""),b.ic("disabled",n.editMode[i]),b.yb(2),b.Cb("hidden",n.editMode[i]),b.kc("for","answer-",i,""),b.yb(1),b.Ic(e.name),b.yb(1),b.ic("type",n.editMode[i]?"text":"hidden"),b.yb(1),b.ic("ngIf",!n.editMode[i])}}function re(e,t){if(1&e){const e=b.Rb();b.Qb(0,"div",47),b.Fc(1,ce,7,8,"div",48),b.Qb(2,"p",49),b.Xb("click",function(){return b.yc(e),b.bc(2).addAnswer()}),b.Lb(3,"i",34),b.Hc(4," Add another answer"),b.Pb(),b.Pb()}if(2&e){const e=b.bc(2);b.yb(1),b.ic("ngForOf",e.answers)}}function le(e,t){if(1&e){const e=b.Rb();b.Qb(0,"div"),b.Qb(1,"p-radioButton",58),b.Xb("onClick",function(){return b.yc(e),b.bc(2).selectTrueOrFalse(!0)}),b.Pb(),b.Qb(2,"label",59),b.Hc(3," true "),b.Pb(),b.Lb(4,"br"),b.Qb(5,"p-radioButton",60),b.Xb("onClick",function(){return b.yc(e),b.bc(2).selectTrueOrFalse(!1)}),b.Pb(),b.Qb(6,"label",61),b.Hc(7," false "),b.Pb(),b.Pb()}}function de(e,t){if(1&e){const e=b.Rb();b.Qb(0,"div",10),b.Qb(1,"div"),b.Qb(2,"label",35),b.Hc(3,"Question Type"),b.Pb(),b.Lb(4,"br"),b.Qb(5,"p-dropdown",36),b.Xb("onChange",function(t){return b.yc(e),b.bc().showSelectedQuestionType(t)}),b.Pb(),b.Pb(),b.Qb(6,"div",4),b.Qb(7,"div",37),b.Qb(8,"label",38),b.Hc(9,"Question"),b.Pb(),b.Lb(10,"br"),b.Lb(11,"input",39,40),b.Pb(),b.Qb(13,"div",41),b.Qb(14,"label",38),b.Hc(15,"Points"),b.Pb(),b.Lb(16,"br"),b.Lb(17,"input",42,40),b.Pb(),b.Pb(),b.Fc(19,oe,5,1,"div",43),b.Fc(20,re,5,1,"div",43),b.Fc(21,le,8,0,"div",13),b.Qb(22,"span",44),b.Xb("click",function(){return b.yc(e),b.bc().createSingleQuestion()}),b.Hc(23," Add "),b.Lb(24,"i",19),b.Pb(),b.Qb(25,"span",45),b.Xb("click",function(){return b.yc(e),b.bc().cancelAddingRelated()}),b.Lb(26,"i",46),b.Pb(),b.Pb()}if(2&e){const e=b.bc();b.yb(5),b.ic("options",e.singleQuestionTypes),b.yb(14),b.ic("ngIf",2==e.selectedQuetionType),b.yb(1),b.ic("ngIf",0==e.selectedQuetionType),b.yb(1),b.ic("ngIf",1==e.selectedQuetionType)}}const be=function(){return["../../submissions"]};let ue=(()=>{class e{constructor(e,t,i,n,s,o){this.questionService=e,this.feedbackService=t,this.formBuilder=i,this.alertService=n,this.activatedRoute=s,this.router=o,this.selectedQuetionType=2,this.selectedMainQuetionType=0,this.mainQuestionModel=new Object,this.feedbackTemplate=new E,this.relatedSingleQuestionsArray=[],this.answers=[],this.editMode=[],this.savedHeader="",this.count=1,this.label="",this.createSingleQuestionFlag=!1,this.loading=!1,this.choicesField=Array.from(Array(10).keys()),this.quizTime=[],this.singleQuestionTypes=[{label:"Single Choice",value:z.b.SingleChoice},{label:"Multiple Choice",value:z.b.MultipleChoice},{label:"True or False",value:z.b.TrueOrFalse}],this.questionTypes=[{label:"Reading",value:z.a.Reading},{label:"Writing",value:z.a.Writing},{label:"Listening",value:z.a.Listening},{label:"Group of Single Questions",value:z.a.GroupOfSingleQuestions},{label:"Speaking",value:z.a.Speaking}],this.quizTime=[{label:"15 Mins",value:15},{label:"30 Mins",value:30},{label:"120 Mins",value:120}]}showSelectedQuestionType(e){this.count=1,this.answers=[],this.answers.push({name:"",isCorrect:!1}),this.editMode=[!0],this.selectedQuetionType=e.value}addRelatedQuestion(){this.createSingleQuestionFlag=!0,this.selectedQuetionType=2}ngOnInit(){this.loadForm(),this.answers.push({name:"",isCorrect:!1}),this.editMode[0]=!0}saveHeader(){this.savedHeader=this.form.controls.QuestionHeaderField.value}loadForm(){var e,t,i,n;const s=null===(t=null===(e=null==this?void 0:this.form)||void 0===e?void 0:e.value)||void 0===t?void 0:t.name,o=(null===(n=null===(i=null==this?void 0:this.form)||void 0===i?void 0:i.value)||void 0===n?void 0:n.duration)|this.quizTime[0].value;this.form=this.formBuilder.group({name:s,duration:o,SingleQuestionTypeField:z.b.SingleChoice,QuestionHeaderField:this.savedHeader,QuestionTextField:"",choicesField:!1,currentLabelField:"",TrueorFalse:!1,completeQuestion:"",ReadingParagraphField:"",pointsField:25,minCharsField:0,noOfRepeatsField:0,audioPathField:""})}toggleLabelEditingMode(){this.form.controls.currentLabelField.value&&(this.answers[this.count-1].name=this.form.controls.currentLabelField.value,this.form.controls.currentLabelField.setValue(""),this.editMode[this.count-1]=!this.editMode[this.count-1],this.editMode[this.count]=!0)}addAnswer(){this.answers[this.count-1].name?(this.count++,this.answers.push({name:"",isCorrect:!1}),this.editMode[this.count-1]=!0):this.alertService.newAlert("error","Please Enter Answer Text")}selectSingleRightAnswer(e){for(let t of this.answers)t.isCorrect=!1;e.isCorrect=!0}selectMultipleRightAnswers(e,t){this.answers.find(i=>{i==e&&(i.isCorrect=t)})}selectTrueOrFalse(e){this.answers=e?[{name:"true",isCorrect:!0}]:[{name:"false",isCorrect:!0}]}remove(e){this.answers.splice(e,1),this.editMode.splice(e,1),this.count--}createSingleQuestion(){if(this.singleQuestion=new Object,this.singleQuestion.points=this.form.controls.pointsField.value,this.singleQuestion.singleQuestionType=this.form.controls.SingleQuestionTypeField.value,this.selectedQuetionType!=z.b.Complete&&this.selectedQuetionType!=z.b.Speaking){this.singleQuestion.text=this.form.controls.QuestionTextField.value,this.singleQuestion.choices=this.answers,this.selectedQuetionType==z.b.TrueOrFalse&&(this.singleQuestion.answerIsTrueOrFalse="true"==this.singleQuestion.choices[0].name);for(let e of this.singleQuestion.choices)if(1==e.isCorrect)return void this.addSingleRelatedQuestion();this.alertService.newAlert("error","Please Select the right answers")}else this.singleQuestion.text=this.form.controls.QuestionTextField.value,this.singleQuestion.choices=[],this.addSingleRelatedQuestion()}addSingleRelatedQuestion(){this.selectedQuetionType==z.b.TrueOrFalse&&(this.singleQuestion.choices=[]),this.relatedSingleQuestionsArray.push(this.singleQuestion),this.count=1,this.answers=[],this.answers.push({name:"",isCorrect:!1}),this.editMode=[!0],this.loadForm(),this.createSingleQuestionFlag=!1}removeRelativeQuestion(e){this.relatedSingleQuestionsArray.splice(e,1)}cancelAddingRelated(){this.createSingleQuestionFlag=!1}createQuestion(){this.mainQuestionModel.header=this.form.controls.QuestionHeaderField.value,""!=this.mainQuestionModel.header?0!==this.relatedSingleQuestionsArray.length?(this.mainQuestionModel.questionTypeId=this.selectedMainQuetionType,this.mainQuestionModel.singleQuestions=this.relatedSingleQuestionsArray,this.feedbackTemplate.questions[0]=this.mainQuestionModel,this.feedbackTemplate.duration=this.form.controls.duration.value,this.feedbackTemplate.name=this.form.controls.name.value,this.feedbackService.createFeedBackSheetTemplate(this.feedbackTemplate).subscribe(e=>{this.alertService.newAlert("success","Feedback template created successfuly"),this.router.navigate(["/supervisor/feedback-sheet/submissions",{relativeTo:this.activatedRoute}])})):this.alertService.newAlert("error","Please start adding questions first"):this.alertService.newAlert("error","Please enter title for the feedback sheet")}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(K.a),b.Kb(h),b.Kb(f.e),b.Kb(g.a),b.Kb(s.a),b.Kb(s.c))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-create-or-view-feedback-template"]],features:[b.xb([K.a])],decls:29,vars:9,consts:[[1,"container","mb-5"],[1,"page-title"],[1,"text-secondary","font-weight-bold"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6"],["for","TemplateName",1,"text-secondary","mt-3","mb-2"],["autocomplete","off","required","","type","text","name","name","id","TemplateName","formControlName","name","aria-describedby","Template Name","placeholder","Type the Feedback Template Name",1,"form-control","adler-form-control",2,"width","100%"],["for","duration",1,"text-secondary","mt-3","mb-2"],["formControlName","duration","id","duration",3,"options"],[1,"questionArea","p-3","mt-3"],[1,"text-secondary","mt-3","mb-2"],["autocomplete","off","required","","type","text","name","question","id","questionHeader","formControlName","QuestionHeaderField","aria-describedby","question","placeholder","Type the Feedback header",1,"form-control","adler-form-control",2,"width","100%",3,"keyup"],[4,"ngIf"],["class","add-related-area",4,"ngIf"],["class","questionArea p-3 mt-3",4,"ngIf"],[1,"createBtns","mt-4"],[1,"mr-3","btn","btn-outline-danger","rounded-pill","px-5",3,"routerLink"],["type","submit",1,"btn","adler-btn","my-3","px-5","rounded-pill",3,"disabled"],[1,"fa","fa-arrow-right","ml-3"],[1,"mt-3"],["class","single-question",4,"ngFor","ngForOf"],[1,"single-question"],[1,"pi","pi-trash","text-danger",3,"click"],[1,"show-points"],[1,"text-secondary","font-weight-bold","question-text"],[4,"ngFor","ngForOf"],["class","pi pi-check text-success font-weight-bold",4,"ngIf"],["class","pi pi-times text-danger font-weight-bold",4,"ngIf"],[1,"pi","pi-check","text-success","font-weight-bold"],[1,"pi","pi-times","text-danger","font-weight-bold"],[1,"add-related-area"],[1,"add-related",3,"click"],[1,"special-rounded-btn"],[1,"pi","pi-plus"],[1,"text-secondary"],["formControlName","SingleQuestionTypeField",3,"options","onChange"],[1,"col-md-9"],[1,"text-secondary","mt-3"],["autocomplete","off","required","","type","text","name","question","id","question","formControlName","QuestionTextField","aria-describedby","question","placeholder","Type the question",1,"form-control","adler-form-control",2,"width","100%"],["QuestionTextField",""],[1,"col-md-3"],["autocomplete","off","required","","type","text","name","question","id","writingQuestion","formControlName","pointsField","aria-describedby","question","placeholder","Points",1,"form-control","adler-form-control",2,"width","100%"],["class","single-chioce-answers",4,"ngIf"],[1,"btn","adler-btn","my-3","px-5","rounded-pill",3,"click"],["title","cancel",1,"cancel-button",3,"click"],[1,"fa","fa-times","ml-3"],[1,"single-chioce-answers"],["class","single-answer",4,"ngFor","ngForOf"],[1,"add-answer","text-secondary",3,"click"],[1,"single-answer"],["formControlName","choicesField",1,"align-middle",3,"disabled","inputId","value","onClick"],[3,"for"],["autocomplete","off","formControlName","currentLabelField",1,"edit-label",3,"type","blur"],["class","pi pi-times",3,"click",4,"ngIf"],[1,"pi","pi-times",3,"click"],["autocomplete","off","type","checkbox","name","questionCheckbox",3,"disabled","id","change"],["input",""],["inputId","trueAnswer","value","true","formControlName","TrueorFalse",1,"align-middle",3,"onClick"],["for","trueAnswer",2,"margin-left","10px"],["inputId","falseAnswer","value","false","formControlName","TrueorFalse",1,"align-middle",3,"onClick"],["for","falseAnswer",2,"margin-left","10px"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"h4",2),b.Hc(3,"FeedBack Template"),b.Pb(),b.Pb(),b.Qb(4,"form",3),b.Xb("ngSubmit",function(){return t.createQuestion()}),b.Qb(5,"div",4),b.Qb(6,"div",5),b.Qb(7,"label",6),b.Hc(8,"Feed back Template Name"),b.Pb(),b.Lb(9,"input",7),b.Pb(),b.Qb(10,"div",5),b.Qb(11,"label",8),b.Hc(12,"To be Submitted Within"),b.Pb(),b.Lb(13,"br"),b.Lb(14,"p-dropdown",9),b.Pb(),b.Pb(),b.Qb(15,"div",10),b.Qb(16,"label",11),b.Hc(17,"Feed back Title"),b.Pb(),b.Qb(18,"input",12),b.Xb("keyup",function(){return t.saveHeader()}),b.Pb(),b.Fc(19,J,1,0,"div",13),b.Fc(20,te,4,1,"div",13),b.Fc(21,ie,5,0,"p",14),b.Pb(),b.Fc(22,de,27,4,"div",15),b.Qb(23,"div",16),b.Qb(24,"a",17),b.Hc(25," Cancel "),b.Pb(),b.Qb(26,"button",18),b.Hc(27," Create "),b.Lb(28,"i",19),b.Pb(),b.Pb(),b.Pb(),b.Pb()),2&e&&(b.yb(4),b.ic("formGroup",t.form),b.yb(10),b.ic("options",t.quizTime),b.yb(5),b.ic("ngIf",0==t.selectedMainQuetionType),b.yb(1),b.ic("ngIf",t.relatedSingleQuestionsArray.length>0),b.yb(1),b.ic("ngIf",2!=t.selectedMainQuetionType&&4!=t.selectedMainQuetionType),b.yb(1),b.ic("ngIf",t.createSingleQuestionFlag),b.yb(2),b.ic("routerLink",b.lc(8,be)),b.yb(2),b.ic("disabled",t.createSingleQuestionFlag))},directives:[f.y,f.q,f.i,f.b,f.w,f.p,f.g,m.a,n.m,s.f,n.l,j.a],styles:['.questionArea[_ngcontent-%COMP%]{color:#2c3e90;border-radius:8px;box-shadow:0 2px 4px 0 rgba(0,0,0,.16);border:1px solid var(--dark-blue-grey-16);background-color:#fafafa;position:relative}.edit-label[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]{margin-left:1rem;border:none;border-bottom:1px solid #ddd;padding:.2rem;outline:none;width:50%}.add-answer[_ngcontent-%COMP%]{margin-left:1.2rem;padding:1rem;display:inline-block;cursor:pointer}.add-answer[_ngcontent-%COMP%]   .pi-plus[_ngcontent-%COMP%], .pi-times[_ngcontent-%COMP%]{font-size:.8rem}.pi-times[_ngcontent-%COMP%]{cursor:pointer}.align-middle[_ngcontent-%COMP%]  p-radiobutton, .pi-times[_ngcontent-%COMP%]{vertical-align:middle}.single-answer[_ngcontent-%COMP%]{padding:.5rem 0}.single-answer[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-left:1rem;border:none;border-bottom:1px solid #ddd;padding:.2rem;outline:none;width:50%}.hidden[_ngcontent-%COMP%]{display:none}p-dropdown[_ngcontent-%COMP%]  span{padding-right:3rem;margin-left:1rem;font-weight:500}.single-word[_ngcontent-%COMP%]{cursor:pointer}.question-content[_ngcontent-%COMP%]{background-color:#d0d4e5;padding:1rem;border-radius:5px}.add-related-area[_ngcontent-%COMP%]{text-align:right;margin-top:1rem}.add-related[_ngcontent-%COMP%]{text-align:right}.question-text[_ngcontent-%COMP%]{background-color:#d0d4e5;padding:1rem;border-radius:5px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:.3rem 0}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.8rem;margin-right:.5rem}.single-question[_ngcontent-%COMP%]{position:relative;background-color:#fff;padding:1rem;border-radius:8px;margin:10px auto;box-shadow:0 0 5px #ddd}.single-question[_ngcontent-%COMP%]   .pi-times[_ngcontent-%COMP%]{cursor:default}.single-question[_ngcontent-%COMP%]   .pi-trash[_ngcontent-%COMP%]{position:absolute;top:2.2rem;right:2rem;cursor:pointer}.cancel-button[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:1rem;right:1rem}.points-field[_ngcontent-%COMP%]{position:absolute;left:18px;bottom:.6rem;width:200px}.group-abs[_ngcontent-%COMP%]{position:absolute;bottom:.5rem}.lds-ellipsis[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:45px}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:33px;width:13px;height:13px;border-radius:50%;background:#666;animation-timing-function:cubic-bezier(0,1,1,0)}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{left:8px;animation:lds-ellipsis1 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){left:8px;animation:lds-ellipsis2 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){left:32px;animation:lds-ellipsis2 .6s infinite}.lds-ellipsis[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){left:56px;animation:lds-ellipsis3 .6s infinite}@keyframes lds-ellipsis1{0%{transform:scale(0)}to{transform:scale(1)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}to{transform:scale(0)}}@keyframes lds-ellipsis2{0%{transform:translate(0)}to{transform:translate(24px)}}.listening-question-wrapper[_ngcontent-%COMP%]{position:relative}.listening-question-wrapper[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{position:absolute;top:35px;right:10px}p-fileUpload[_ngcontent-%COMP%]     button[icon="pi pi-times"]{display:none}.show-points[_ngcontent-%COMP%]{position:absolute;background-color:#2c3e90;color:#fff;font-size:.6rem;font-weight:700;top:6px;right:50px;width:63px;text-align:center;padding-top:4px;height:22px;border-radius:8px}']}),e})();var pe=i("FqdU");const he=[{path:"submissions",component:D,data:{role:"superadmin"}},{path:"template",children:[{path:"create",component:ue}],data:{role:"superadmin"}},{path:"instances",component:(()=>{class e{constructor(e){this.router=e}ngOnInit(){}redirectToQuizDetails(e){e.status==pe.a.Pending&&this.router.navigate(["student/test/details",e.id])}}return e.\u0275fac=function(t){return new(t||e)(b.Kb(s.c))},e.\u0275cmp=b.Eb({type:e,selectors:[["app-feed-back-instances-list"]],decls:3,vars:0,consts:[[1,"text-center","p-5"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"p"),b.Hc(2,"feed-back-instances-list works!"),b.Pb(),b.Pb())},styles:[""]}),e})()}];let ge=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},imports:[[s.g.forChild(he)],s.g]}),e})();var fe=i("PCNd"),me=i("7/hU");let Pe=(()=>{class e{}return e.\u0275mod=b.Ib({type:e}),e.\u0275inj=b.Hb({factory:function(t){return new(t||e)},providers:[h],imports:[[n.c,ge,fe.a,me.TestModule]]}),e})()}}]);