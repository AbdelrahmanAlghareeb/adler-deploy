(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{NWbE:function(e,t,o){"use strict";o.r(t),o.d(t,"LessonsModule",function(){return F});var n=o("ofXK"),s=o("PCNd"),i=o("tyNb"),r=o("fXoL"),l=o("3Pt+"),c=o("J7/z"),d=o("WR8Z"),a=o("dJ3e"),b=o("zFJ7"),u=o("upuz");function h(e,t){1&e&&(r.Qb(0,"div",37),r.Qb(1,"p",8),r.Fc(2,"Bonus Points"),r.Pb(),r.Lb(3,"input",38),r.Pb())}function p(e,t){if(1&e){const e=r.Rb();r.Qb(0,"div",5),r.Qb(1,"div",6),r.Qb(2,"div",28),r.Qb(3,"div",13),r.Qb(4,"p",8),r.Fc(5,"Question Text"),r.Pb(),r.Lb(6,"input",29),r.Pb(),r.Pb(),r.Pb(),r.Qb(7,"div",6),r.Qb(8,"div",30),r.Qb(9,"p",8),r.Fc(10,"Min No of Characters"),r.Pb(),r.Lb(11,"input",31),r.Pb(),r.Qb(12,"div",30),r.Qb(13,"p",8),r.Fc(14,"No. of Max Points"),r.Pb(),r.Lb(15,"input",32),r.Pb(),r.Qb(16,"div",30),r.Qb(17,"div",6),r.Qb(18,"div",33),r.Qb(19,"input",34),r.Xb("change",function(){r.wc(e);const t=r.bc();return t.showBonus=!t.showBonus}),r.Pb(),r.Qb(20,"label",35),r.Fc(21,"Bonus"),r.Pb(),r.Pb(),r.Dc(22,h,4,0,"div",36),r.Pb(),r.Pb(),r.Pb(),r.Pb()}if(2&e){const e=r.bc();r.yb(22),r.ic("ngIf",e.showBonus)}}let m=(()=>{class e{constructor(e,t,o,n,s){this.formBuilder=e,this.activeModal=t,this.teacherService=o,this.config=n,this.alertService=s,this.additionalHomework=!1,this.lessonInstanceStudents=[],this.absents=[],this.missedHomework=[],this.studentsIds=[],this.students=[],this.clonedStudents=[],this.showBonus=!1,this.btnClicked=!1,this.lessonReport=new Object}ngOnInit(){this.loadForm(),this.teacherService.getLessonReportStudents(this.config.data.lesson.id).subscribe(e=>{this.students=e.data,this.clonedStudents=JSON.parse(JSON.stringify(this.students))})}loadForm(){this.form=this.formBuilder.group({lessonDoneField:"",toDoField:"",additionalHomeworkField:!1,questionTextField:"",minCharsField:"",pointsField:"",bonusPointsField:""})}getAbsents(e){this.absents=[];for(let t of e)this.absents.push(t)}getMissedHomework(e){this.missedHomework=[];for(let t of e)this.missedHomework.push(t)}getLessonInstanceStudents(){this.studentsIds=[],this.lessonInstanceStudents=[];for(let t of this.absents)this.studentsIds.push(t);for(let t of this.missedHomework)this.studentsIds.push(t);let e=[...new Set(this.studentsIds)];for(let t of e){let e=t.split("?")[0],o=t.split("?").pop();this.absents.includes(t)&&this.missedHomework.includes(t)?this.lessonInstanceStudents.push({studentId:e,id:o,lessonInstanceId:this.config.data.lesson.id,attend:!1,homework:!1}):this.absents.includes(t)&&!this.missedHomework.includes(t)?this.lessonInstanceStudents.push({studentId:e,id:o,lessonInstanceId:this.config.data.lesson.id,attend:!1,homework:!0}):this.lessonInstanceStudents.push({studentId:e,id:o,lessonInstanceId:this.config.data.lesson.id,attend:!0,homework:!1})}}toggleAdditionalHomework(e){this.additionalHomework=e}createReport(){this.btnClicked&&(this.lessonReport.id=this.config.data.lesson.id,this.lessonReport.materialDone=this.form.controls.lessonDoneField.value,this.lessonReport.materialToDo=this.form.controls.toDoField.value,this.lessonReport.isAdditionalHomework=this.form.controls.additionalHomeworkField.value,this.getLessonInstanceStudents(),this.lessonReport.lessonInstanceStudent=this.lessonInstanceStudents,this.lessonReport.isAdditionalHomework&&(this.lessonReport.additionalHomework=new Object,this.lessonReport.additionalHomework.text=this.form.controls.questionTextField.value,this.lessonReport.additionalHomework.minCharacters=this.form.controls.minCharsField.value,this.lessonReport.additionalHomework.points=this.form.controls.pointsField.value,this.lessonReport.additionalHomework.bonusPoints=this.form.controls.bonusPointsField.value?this.form.controls.bonusPointsField.value:0),this.teacherService.submitLessonReport(this.lessonReport).subscribe(e=>{this.alertService.newAlert("success","Report Created Successfully"),this.close(!0)})),this.btnClicked=!1}clicked(){this.btnClicked=!0}close(e){this.activeModal.close(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(l.c),r.Kb(c.d),r.Kb(d.a),r.Kb(c.b),r.Kb(a.a))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-lessons-report"]],decls:42,vars:6,consts:[[1,"report-header"],[1,"text-primary","font-weight-bold"],[1,"text-secondary","font-weight-bold"],[1,"font-weight-bold"],[3,"formGroup","click"],[1,"container"],[1,"row"],[1,"col-md-6"],[1,"text-secondary"],["placeholder","Type What Done in The Lesson","pInputTextarea","","formControlName","lessonDoneField",1,"adler-textarea"],["title","Attendance","leftSideTitle","Absents Students List",3,"students","getSwitched"],["placeholder","Type What To Do Next Time","pInputTextarea","","formControlName","toDoField",1,"adler-textarea"],["title","Normal Homework","leftSideTitle","Missed Homework",3,"students","getSwitched"],[1,"col-md-12","mt-3"],[1,"text-capitalize","font-weight-bold"],[1,"mt-3"],[1,"form-check","form-check-inline","mr-5"],["formControlName","additionalHomeworkField","type","radio","name","additionalHomeworkField","id","inlineRadio1",1,"form-check-input",3,"value","change"],["for","inlineRadio1",1,"form-check-label","font-weight-bold","text-secondary"],[1,"form-check","form-check-inline","ml-5"],["formControlName","additionalHomeworkField","type","radio","name","additionalHomeworkField","id","inlineRadio2",1,"form-check-input",3,"value","change"],["for","inlineRadio2",1,"form-check-label","font-weight-bold","text-secondary"],["class","container",4,"ngIf"],[1,"col-md-12","mt-5"],["type","submit",1,"btn","adler-btn","font-weight-bold","mr-3",3,"click"],[1,"ml-4"],[1,"fas","fa-arrow-right"],["type","button",1,"btn","outlined-adler-btn","btn-adler-sm","font-weight-bold",3,"click"],[2,"width","100%"],["required","","name","question-text","formControlName","questionTextField","type","text","id","questionText","placeholder","Question Text",1,"form-control","adler-form-control"],[1,"col-md-4"],["required","","name","min-chars","formControlName","minCharsField","type","text","id","minChars","placeholder","Min No of Characters",1,"form-control","adler-form-control"],["required","","name","points","formControlName","pointsField","type","text","id","points","placeholder","No. of Max Points",1,"form-control","adler-form-control"],[1,"col-md-3","pt-5"],["type","checkbox","name","bonusCheckbox","id","bonusCheckbox",1,"form-check-input",3,"change"],["for","bonus"],["class","col-md-9",4,"ngIf"],[1,"col-md-9"],["required","","name","bonusPoints","formControlName","bonusPointsField","type","text","id","bonusPoints","placeholder","Bonus",1,"form-control","adler-form-control"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"h5",1),r.Fc(2,"Create Lesson Report"),r.Pb(),r.Qb(3,"h5",2),r.Fc(4,"Lesson 4"),r.Pb(),r.Qb(5,"p",3),r.Fc(6,"17 Dec 2020"),r.Pb(),r.Pb(),r.Qb(7,"form",4),r.Xb("click",function(){return t.createReport()}),r.Qb(8,"div",5),r.Qb(9,"div",6),r.Qb(10,"div",7),r.Qb(11,"p",8),r.Fc(12,"What Done in The Lesson"),r.Pb(),r.Lb(13,"textarea",9),r.Qb(14,"switch-list",10),r.Xb("getSwitched",function(e){return t.getAbsents(e)}),r.Pb(),r.Pb(),r.Qb(15,"div",7),r.Qb(16,"p",8),r.Fc(17,"To Do Next Time"),r.Pb(),r.Lb(18,"textarea",11),r.Qb(19,"switch-list",12),r.Xb("getSwitched",function(e){return t.getMissedHomework(e)}),r.Pb(),r.Pb(),r.Qb(20,"div",13),r.Qb(21,"h6",14),r.Fc(22,"Do you want to add additional homework?"),r.Pb(),r.Qb(23,"div",15),r.Qb(24,"div",16),r.Qb(25,"input",17),r.Xb("change",function(){return t.toggleAdditionalHomework(!0)}),r.Pb(),r.Qb(26,"label",18),r.Fc(27,"Yes"),r.Pb(),r.Pb(),r.Qb(28,"div",19),r.Qb(29,"input",20),r.Xb("change",function(){return t.toggleAdditionalHomework(!1)}),r.Pb(),r.Qb(30,"label",21),r.Fc(31,"No"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Dc(32,p,23,1,"div",22),r.Qb(33,"div",5),r.Qb(34,"div",6),r.Qb(35,"div",23),r.Qb(36,"button",24),r.Xb("click",function(){return t.clicked()}),r.Fc(37,"Submit "),r.Qb(38,"span",25),r.Lb(39,"i",26),r.Pb(),r.Pb(),r.Qb(40,"button",27),r.Xb("click",function(){return t.close()}),r.Fc(41,"Cancel"),r.Pb(),r.Pb(),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.yb(7),r.ic("formGroup",t.form),r.yb(7),r.ic("students",t.students),r.yb(5),r.ic("students",t.clonedStudents),r.yb(6),r.ic("value",!0),r.yb(4),r.ic("value",!1),r.yb(3),r.ic("ngIf",t.additionalHomework))},directives:[l.s,l.k,l.e,l.b,b.a,l.j,l.d,u.a,l.o,n.l,l.q],styles:[".report-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:inline-block;color:#b2afaf}.report-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{display:inline-block;margin-right:3rem}"]}),e})();var f=o("arFO");function g(e,t){1&e&&(r.Qb(0,"span",16),r.Lb(1,"i",17),r.Pb())}function P(e,t){if(1&e){const e=r.Rb();r.Qb(0,"button",18),r.Xb("click",function(){r.wc(e);const t=r.bc().$implicit;return r.bc().show(t)}),r.Fc(1,"Create Report "),r.Pb()}}function w(e,t){if(1&e&&(r.Qb(0,"div",7),r.Qb(1,"div",8),r.Qb(2,"div",9),r.Qb(3,"div",10),r.Qb(4,"h6",11),r.Fc(5),r.Pb(),r.Qb(6,"p"),r.Fc(7),r.cc(8,"date"),r.Pb(),r.Pb(),r.Qb(9,"div"),r.Qb(10,"p",12),r.Fc(11," Lorem epsum "),r.Pb(),r.Pb(),r.Pb(),r.Qb(12,"div",13),r.Dc(13,g,2,0,"span",14),r.Dc(14,P,2,0,"button",15),r.Pb(),r.Pb(),r.Pb()),2&e){const e=t.$implicit;r.yb(5),r.Hc("Lesson ",null==e?null:e.serial,""),r.yb(2),r.Gc(r.ec(8,4,null==e||null==e.lessonDefinition?null:e.lessonDefinition.createdDate,"MMM d y")),r.yb(6),r.ic("ngIf",e.submittedReport),r.yb(1),r.ic("ngIf",!e.submittedReport)}}function v(e,t){1&e&&(r.Qb(0,"span"),r.Fc(1,"Please select a group instance first"),r.Pb())}function k(e,t){1&e&&(r.Qb(0,"span"),r.Fc(1,"No Lessons yet for this group instance"),r.Pb())}function Q(e,t){if(1&e&&(r.Qb(0,"div",19),r.Dc(1,v,2,0,"span",20),r.Dc(2,k,2,0,"span",20),r.Pb()),2&e){const e=r.bc();r.yb(1),r.ic("ngIf",e.selectedGroupInstance),r.yb(1),r.ic("ngIf",e.selectedGroupInstance)}}const I=[{path:"",component:(()=>{class e{constructor(e,t,o){this.dialogService=e,this.teacherService=t,this.authService=o,this.lessons=[],this.now=new Date,this.levels=[{label:"Level",value:""}],this.groupInstances=[{label:"Group Instance",value:""}]}ngOnInit(){this.authService.userData$.subscribe(e=>{this.userId=e.id,this.getTeacherGroupInstances()})}show(e){this.dialogService.open(m,{showHeader:!1,width:"80%",data:{lesson:e}}).onClose.subscribe(t=>{t&&this.getAllLessons({value:e.groupInstance.id})})}getTeacherGroupInstances(){this.teacherService.getAllGroupInstancesByTeacherId(this.userId).subscribe(e=>{e.data.forEach(e=>{this.groupInstances.push({value:e.groupInstanceId,label:"Group Instance "+e.groupInstanceId})})})}getAllLessons(e){if(!e.value)return this.lessons=[];this.teacherService.getAllLessonInstancesByGroupInstance(e.value).subscribe(e=>{this.lessons=e.data,console.log(this.lessons)})}}return e.\u0275fac=function(t){return new(t||e)(r.Kb(c.a),r.Kb(d.a),r.Kb(a.c))},e.\u0275cmp=r.Eb({type:e,selectors:[["app-lessons"]],features:[r.xb([d.a])],decls:8,vars:6,consts:[[1,"lessons","container"],[1,"mt-3"],[1,"mr-4",3,"options","ngModel","ngModelChange"],[3,"options","ngModel","ngModelChange","onChange"],[1,"row","mt-5","mb-5"],["class","col-lg-6 col-12 mb-4",4,"ngFor","ngForOf"],["class","col text-center text-danger",4,"ngIf"],[1,"col-lg-6","col-12","mb-4"],[1,"align-items-center","d-flex","justify-content-between","p-3","lesson"],[1,"d-flex","flex-column"],[1,"align-items-baseline","d-flex"],[1,"mr-5","text-secondary"],[1,"m-0"],[1,"d-flex"],["class","Ellipse-13 rounded-circle",4,"ngIf"],["class","btn adler-btn pl-1 pr-1",3,"click",4,"ngIf"],[1,"Ellipse-13","rounded-circle"],[1,"fas","fa-check"],[1,"btn","adler-btn","pl-1","pr-1",3,"click"],[1,"col","text-center","text-danger"],[4,"ngIf"]],template:function(e,t){1&e&&(r.Qb(0,"div",0),r.Qb(1,"div",1),r.Qb(2,"div"),r.Qb(3,"p-dropdown",2),r.Xb("ngModelChange",function(e){return t.selectedLevel=e}),r.Pb(),r.Qb(4,"p-dropdown",3),r.Xb("ngModelChange",function(e){return t.selectedGroupInstance=e})("onChange",function(e){return t.getAllLessons(e)}),r.Pb(),r.Pb(),r.Qb(5,"div",4),r.Dc(6,w,15,7,"div",5),r.Dc(7,Q,3,2,"div",6),r.Pb(),r.Pb(),r.Pb()),2&e&&(r.yb(3),r.ic("options",t.levels)("ngModel",t.selectedLevel),r.yb(1),r.ic("options",t.groupInstances)("ngModel",t.selectedGroupInstance),r.yb(2),r.ic("ngForOf",t.lessons),r.yb(1),r.ic("ngIf",0==t.lessons.length))},directives:[f.a,l.j,l.m,n.k,n.l],pipes:[n.e],styles:[".Ellipse-13[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;margin:.063rem 1.068rem .148rem .525rem;padding:.625rem .625rem .563rem;border:2px solid #207a04;background-color:rgba(50,213,9,.55)}h5[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;font-stretch:normal;font-style:normal;line-height:4.46;letter-spacing:normal;text-align:left}.lesson[_ngcontent-%COMP%]{border-radius:16px;box-shadow:0 2px 4px 0 rgba(0,0,0,.16);border:1px solid var(--dark-blue-grey-16);background-color:#fafafa}.adler-btn[_ngcontent-%COMP%]{width:9rem}"]}),e})()},{path:"lesson-report",component:m}];let y=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[i.g.forChild(I)],i.g]}),e})(),F=(()=>{class e{}return e.\u0275mod=r.Ib({type:e}),e.\u0275inj=r.Hb({factory:function(t){return new(t||e)},imports:[[n.c,y,s.a]]}),e})()}}]);